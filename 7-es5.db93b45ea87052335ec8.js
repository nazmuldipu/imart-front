function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{I9cL:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",(function(){return xe})),n.d(t,"InventoryModule",(function(){return Te}));var r,o=n("tyNb"),i=n("KZX/"),c=n("mrSG"),s=n("fXoL"),a=n("Qjeu"),u=n("tk/3"),l=n("jgEc"),b=((r=function(){function e(t){_classCallCheck(this,e),this.dataSource=t,this.inventoryUrl="api/inventory"}return _createClass(e,[{key:"create",value:function(e){for(var t=[],n=0;n<e.items.length;n++){var r=e.items[n];t.push({productId:r.product._id,quantity:r.quantity,purchase_price:r.purchase_price})}return this.dataSource.sendRequest("POST",this.inventoryUrl,{inventoryType:e.inventoryType,reference:e.reference,storehouseId:e.storehouse._id,supplierId:e.supplier._id,items:t},!0,null)}},{key:"transfer",value:function(e){for(var t=[],n=0;n<e.items.length;n++){var r=e.items[n];t.push({productId:r.product._id,quantity:r.quantity,purchase_price:r.purchase_price})}return this.dataSource.sendRequest("POST",this.inventoryUrl+"/transfer",{inventoryType:e.inventoryType,reference:e.reference,storehouseId:e.storehouse._id,fromId:e.from._id,items:t},!0,null)}},{key:"getUnapprovedInventories",value:function(e,t,n,r,o){var i=this.generateParam(t,n,r,o);return this.dataSource.sendRequest("GET",this.inventoryUrl+"/transfer/storehouse/"+e,null,!0,i)}},{key:"approveTransferedInventories",value:function(e){return this.dataSource.sendRequest("PUT",this.inventoryUrl+"/transfer/approve/"+e,null,!0,null)}},{key:"getInventory",value:function(e){return this.dataSource.sendRequest("GET",this.inventoryUrl+"/"+e,null,!0,null)}},{key:"getInventoryByStorehouse",value:function(e,t,n,r,o){var i=this.generateParam(t,n,r,o);return this.dataSource.sendRequest("GET",this.inventoryUrl+"/storehouse/"+e,null,!0,i)}},{key:"generateParam",value:function(e,t,n,r){return(new u.d).set("page",e.toString()).set("limit",t.toString()).set("sort",n).set("order",r)}}]),e}()).\u0275fac=function(e){return new(e||r)(s.Zb(l.a))},r.\u0275prov=s.Ib({token:r,factory:r.\u0275fac,providedIn:"root"}),r),d=n("ofXK"),f=n("uEz7"),h=n("1kSV");function v(e,t){if(1&e){var n=s.Sb();s.Rb(0,"tr"),s.Rb(1,"td"),s.Jc(2),s.gc(3,"date"),s.Qb(),s.Rb(4,"td"),s.Jc(5),s.Qb(),s.Rb(6,"td"),s.Jc(7),s.Qb(),s.Rb(8,"td"),s.Jc(9),s.Qb(),s.Rb(10,"td",5),s.Rb(11,"div",6),s.Rb(12,"button",7),s.dc("click",(function(){s.zc(n);var e=t.$implicit;return s.fc().onDetails(e._id)})),s.Nb(13,"i",8),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){var r=t.$implicit;s.zb(2),s.Kc(s.ic(3,4,r.updatedAt,"medium")),s.zb(3),s.Kc(null==r?null:r.reference),s.zb(2),s.Kc(r.inventoryType),s.zb(2),s.Kc(null==r||null==r.items?null:r.items.length)}}var p,m=((p=function(){function e(){_classCallCheck(this,e),this.details=new s.n}return _createClass(e,[{key:"onDetails",value:function(e){this.details.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||p)},p.\u0275cmp=s.Gb({type:p,selectors:[["inventory-list"]],inputs:{inventoryPage:"inventoryPage"},outputs:{details:"details"},decls:20,vars:1,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["routerLink","/dashboard/inventory/add",1,"btn","btn-success","btn-sm"],[1,"table","table-hover","table-bordered","table-responsive-sm"],[4,"ngFor","ngForOf"],[1,"text-right"],["role","group","aria-label","Basic example",1,"btn-group","rounded"],["type","button",1,"btn","btn-light","border","py-0","px-1",3,"click"],[1,"fa","fa-file-text-o"]],template:function(e,t){1&e&&(s.Rb(0,"nav",0),s.Rb(1,"a",1),s.Jc(2,"Inventory List"),s.Qb(),s.Rb(3,"a",2),s.Jc(4," + ADD Inventory "),s.Qb(),s.Qb(),s.Rb(5,"table",3),s.Rb(6,"thead"),s.Rb(7,"tr"),s.Rb(8,"th"),s.Jc(9,"Updated"),s.Qb(),s.Rb(10,"th"),s.Jc(11,"Reference"),s.Qb(),s.Rb(12,"th"),s.Jc(13,"Inventory Type"),s.Qb(),s.Rb(14,"th"),s.Jc(15,"Number of Products"),s.Qb(),s.Rb(16,"th"),s.Jc(17,"Actions"),s.Qb(),s.Qb(),s.Qb(),s.Rb(18,"tbody"),s.Hc(19,v,14,7,"tr",4),s.Qb(),s.Qb()),2&e&&(s.zb(19),s.mc("ngForOf",t.inventoryPage.docs))},directives:[h.d,o.d,d.n],pipes:[d.e],styles:[""],changeDetection:0}),p);function g(e,t){if(1&e&&(s.Rb(0,"div",6),s.Rb(1,"label",12),s.Jc(2,"Supplier: "),s.Qb(),s.Rb(3,"label",13),s.Jc(4),s.Qb(),s.Qb()),2&e){var n=s.fc();s.zb(4),s.Mc("",null==n.inventory||null==n.inventory.supplier?null:n.inventory.supplier.name,"[",null==n.inventory||null==n.inventory.supplier?null:n.inventory.supplier.phone,"]")}}function y(e,t){if(1&e&&(s.Rb(0,"div",6),s.Rb(1,"label",12),s.Jc(2,"From Storehouse: "),s.Qb(),s.Rb(3,"label",13),s.Jc(4),s.Qb(),s.Qb()),2&e){var n=s.fc();s.zb(4),s.Kc(null==n.inventory||null==n.inventory.from?null:n.inventory.from.name)}}function R(e,t){if(1&e&&(s.Rb(0,"tr"),s.Rb(1,"td"),s.Jc(2),s.Qb(),s.Rb(3,"td"),s.Jc(4),s.Qb(),s.Rb(5,"td"),s.Jc(6),s.Qb(),s.Rb(7,"td"),s.Jc(8),s.gc(9,"currency"),s.Qb(),s.Rb(10,"td",17),s.Jc(11),s.gc(12,"currency"),s.Qb(),s.Qb()),2&e){var n=t.$implicit,r=t.index;s.zb(2),s.Kc(r+1),s.zb(2),s.Kc(null==n||null==n.product?null:n.product.slug),s.zb(2),s.Kc(null==n?null:n.quantity),s.zb(2),s.Kc(s.jc(9,5,null==n?null:n.purchase_price,"BDT","symbol-narrow")),s.zb(3),s.Kc(s.jc(12,9,(null==n?null:n.quantity)*(null==n?null:n.purchase_price),"BDT","symbol-narrow"))}}var Q,k=((Q=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnChanges",value:function(e){if(e&&this.inventory){for(var t=0,n=0,r=0;r<this.inventory.items.length;r++){var o=this.inventory.items[r];t+=o.quantity,n+=o.purchase_price*o.quantity}this.total={price:n,quantity:t}}}},{key:"onPrint",value:function(){window.print()}}]),e}()).\u0275fac=function(e){return new(e||Q)},Q.\u0275cmp=s.Gb({type:Q,selectors:[["inventory-details"]],inputs:{inventory:"inventory"},features:[s.xb],decls:72,vars:18,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["routerLink","//dashboard/inventory/add",1,"btn","btn-success","btn-sm","mx-1"],[1,"btn","btn-sm","btn-primary","mx-1",3,"click"],[1,"fa","fa-print"],[1,"form-group","row","m-0","my-1"],[1,"col-sm-6","p-0"],["for","createdAt",1,"col-auto","col-form-label"],["id","createdAt",1,"col-form-label"],[1,"form-group","row","border-top","m-0","my-1"],["for","createdBy",1,"col-auto","col-form-label"],["id","createdBy",1,"col-form-label"],["for","shop",1,"col-auto","col-form-label"],["id","shop",1,"col-form-label"],["class","col-sm-6 p-0",4,"ngIf"],[1,"px-3"],[1,"table","table-hover","table-bordered","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","5"]],template:function(e,t){1&e&&(s.Rb(0,"nav",0),s.Rb(1,"a",1),s.Jc(2,"Inventory Details"),s.Qb(),s.Rb(3,"div"),s.Rb(4,"a",2),s.Jc(5," + ADD Inventory "),s.Qb(),s.Rb(6,"button",3),s.dc("click",(function(){return t.onPrint()})),s.Nb(7,"i",4),s.Jc(8," Print"),s.Qb(),s.Qb(),s.Qb(),s.Rb(9,"div",5),s.Rb(10,"div",6),s.Rb(11,"label",7),s.Jc(12,"Ref:"),s.Qb(),s.Rb(13,"label",8),s.Jc(14),s.Qb(),s.Qb(),s.Rb(15,"div",6),s.Rb(16,"label",7),s.Jc(17,"Inventory Type:"),s.Qb(),s.Rb(18,"label",8),s.Jc(19),s.Qb(),s.Qb(),s.Qb(),s.Rb(20,"div",9),s.Rb(21,"div",6),s.Rb(22,"label",7),s.Jc(23,"Updated at: "),s.Qb(),s.Rb(24,"label",8),s.Jc(25),s.gc(26,"date"),s.Qb(),s.Qb(),s.Rb(27,"div",6),s.Rb(28,"label",10),s.Jc(29,"Updated by: "),s.Qb(),s.Rb(30,"label",11),s.Jc(31),s.Qb(),s.Qb(),s.Qb(),s.Rb(32,"div",9),s.Rb(33,"div",6),s.Rb(34,"label",12),s.Jc(35,"Storehouse: "),s.Qb(),s.Rb(36,"label",13),s.Jc(37),s.Qb(),s.Qb(),s.Hc(38,g,5,2,"div",14),s.Hc(39,y,5,1,"div",14),s.Qb(),s.Rb(40,"div",15),s.Rb(41,"table",16),s.Rb(42,"thead"),s.Rb(43,"tr"),s.Rb(44,"th"),s.Jc(45,"Sl"),s.Qb(),s.Rb(46,"th"),s.Jc(47,"Product"),s.Qb(),s.Rb(48,"th"),s.Jc(49,"Quantity"),s.Qb(),s.Rb(50,"th"),s.Jc(51,"Purchase Rate"),s.Qb(),s.Rb(52,"th",17),s.Jc(53,"Amount"),s.Qb(),s.Qb(),s.Qb(),s.Rb(54,"tbody"),s.Hc(55,R,13,13,"tr",18),s.Rb(56,"tr"),s.Nb(57,"td",19),s.Qb(),s.Qb(),s.Rb(58,"tfoot"),s.Rb(59,"tr"),s.Nb(60,"td"),s.Rb(61,"td"),s.Rb(62,"strong"),s.Jc(63," Grand Total"),s.Qb(),s.Qb(),s.Rb(64,"td"),s.Rb(65,"strong"),s.Jc(66),s.Qb(),s.Qb(),s.Nb(67,"td"),s.Rb(68,"td",17),s.Rb(69,"strong"),s.Jc(70),s.gc(71,"currency"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(14),s.Kc(null==t.inventory?null:t.inventory.reference),s.zb(5),s.Kc(null==t.inventory?null:t.inventory.inventoryType),s.zb(6),s.Kc(s.ic(26,11,null==t.inventory?null:t.inventory.updatedAt,"medium")),s.zb(6),s.Mc("",null==t.inventory||null==t.inventory.updatedBy?null:t.inventory.updatedBy.name,"[",null==t.inventory||null==t.inventory.updatedBy?null:t.inventory.updatedBy.phone,"]"),s.zb(6),s.Kc(null==t.inventory||null==t.inventory.storehouse?null:t.inventory.storehouse.name),s.zb(1),s.mc("ngIf",null==t.inventory?null:t.inventory.supplier),s.zb(1),s.mc("ngIf",null==t.inventory?null:t.inventory.from),s.zb(16),s.mc("ngForOf",null==t.inventory?null:t.inventory.items),s.zb(11),s.Lc(" ",null==t.total?null:t.total.quantity," "),s.zb(4),s.Kc(s.jc(71,14,null==t.total?null:t.total.price,"BDT","symbol-narrow")))},directives:[h.d,o.d,d.o,d.n],pipes:[d.e,d.c],styles:["[_nghost-%COMP%]{font-family:CourierPrime}.tbrow[_ngcontent-%COMP%]:hover{background-color:#81ffd3}"],changeDetection:0}),Q);function I(e,t){if(1&e){var n=s.Sb();s.Rb(0,"li",11),s.dc("click",(function(){s.zc(n);var e=t.$implicit;return s.fc(2).onSelectStorehouse(e._id)})),s.Jc(1),s.Qb()}if(2&e){var r=t.$implicit;s.zb(1),s.Mc(" ",r.name,"[",r.storekeeper_number,"]")}}function S(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",6),s.Rb(1,"ul",7),s.Rb(2,"li",8),s.Jc(3,"Please select a "),s.Rb(4,"strong"),s.Jc(5," Storehouse from List "),s.Qb(),s.Qb(),s.Hc(6,I,2,2,"li",9),s.Qb(),s.Rb(7,"pagination",10),s.dc("paginate",(function(e){return s.zc(n),s.fc().onChangeStorehousePage(e)})),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(6),s.mc("ngForOf",r.storehousePage.docs),s.zb(1),s.mc("page",r.storehousePage)("small",!0)}}function P(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",12),s.Rb(1,"inventory-list",13),s.dc("details",(function(e){return s.zc(n),s.fc().onDetails(e)})),s.Qb(),s.Rb(2,"pagination",10),s.dc("paginate",(function(e){s.zc(n);var t=s.fc();return t.onChangeInventoryPage(null==t.storehouse?null:t.storehouse._id,e)})),s.Qb(),s.Rb(3,"button",14),s.dc("click",(function(){return s.zc(n),s.fc().onClose("list")})),s.Jc(4,"Close"),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(1),s.mc("inventoryPage",r.inventoryPage),s.zb(1),s.mc("page",r.inventoryPage)("small",!0)}}function C(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",15),s.Nb(1,"inventory-details",16),s.Rb(2,"button",14),s.dc("click",(function(){return s.zc(n),s.fc().onClose("details")})),s.Jc(3,"Close"),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(1),s.mc("inventory",r.inventory)}}var z,J=((z=function(){function e(t,n){_classCallCheck(this,e),this.storehouseService=t,this.inventoryService=n,this.loading=!1,this.message="",this.errorMessage=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.getAllStorehouse()}},{key:"getAllStorehouse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"priority",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asc";return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return this.loading=!0,o.prev=1,o.next=4,this.storehouseService.getAll(e,t,n,r).toPromise();case 4:this.storehousePage=o.sent,o.next=10;break;case 7:o.prev=7,o.t0=o.catch(1),this.errorMessage=o.t0;case 10:this.loading=!1;case 11:case"end":return o.stop()}}),o,this,[[1,7]])})))}},{key:"getInventoryByStorehouseId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"priority",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"asc";return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return this.loading=!0,i.prev=1,console.log(e),i.next=5,this.inventoryService.getInventoryByStorehouse(e,t,n,r,o).toPromise();case 5:this.inventoryPage=i.sent,i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),this.errorMessage=i.t0;case 11:this.loading=!1;case 12:case"end":return i.stop()}}),i,this,[[1,8]])})))}},{key:"onChangeStorehousePage",value:function(e){this.getAllStorehouse(e.pageNumber,e.limit,e.sort,e.order)}},{key:"onDetails",value:function(e){var t=this.inventoryPage.docs.find((function(t){return t._id==e}));this.inventory=Object.assign({},t)}},{key:"onEdit",value:function(e){}},{key:"onChangeInventoryPage",value:function(e,t){this.getInventoryByStorehouseId(e,t.pageNumber,t.limit,t.sort,t.order)}},{key:"onSelectStorehouse",value:function(e){var t=this.storehousePage.docs.find((function(t){return t._id==e}));this.storehouse=Object.assign({},t),this.getInventoryByStorehouseId(e)}},{key:"onClose",value:function(e){switch(e){case"details":this.inventory=null;break;case"list":this.inventoryPage=null,this.storehouse=null}}}]),e}()).\u0275fac=function(e){return new(e||z)(s.Mb(a.a),s.Mb(b))},z.\u0275cmp=s.Gb({type:z,selectors:[["app-index"]],decls:8,vars:3,consts:[[1,"container-fluid","component-head"],[1,"container"],[1,"row"],["class","col-md-3",4,"ngIf"],["class","col-12 bg-white pb-3",4,"ngIf"],["class","col-12 bg-white px-0 pb-3",4,"ngIf"],[1,"col-md-3"],[1,"list-group","mb-1"],[1,"list-group-item","disabled"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[3,"page","small","paginate"],[1,"list-group-item",3,"click"],[1,"col-12","bg-white","pb-3"],[3,"inventoryPage","details"],[1,"btn","btn-sm","btn-danger","d-print-none",3,"click"],[1,"col-12","bg-white","px-0","pb-3"],[3,"inventory"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Inventory List"),s.Qb(),s.Qb(),s.Rb(3,"div",1),s.Rb(4,"div",2),s.Hc(5,S,8,3,"div",3),s.Hc(6,P,5,3,"div",4),s.Hc(7,C,4,1,"div",5),s.Qb(),s.Qb()),2&e&&(s.zb(5),s.mc("ngIf",(null==t.storehousePage||null==t.storehousePage.docs?null:t.storehousePage.docs.length)&&!(null!=t.inventoryPage&&null!=t.inventoryPage.docs&&t.inventoryPage.docs.length)),s.zb(1),s.mc("ngIf",(null==t.inventoryPage||null==t.inventoryPage.docs?null:t.inventoryPage.docs.length)&&!t.inventory),s.zb(1),s.mc("ngIf",t.inventory))},directives:[d.o,d.n,f.a,m,k],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}"]}),z),_=n("3Pt+"),w=n("LRne"),O=n("7o/Q"),x=n("D0XW");function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.a;return function(n){return n.lift(new F(e,t))}}var F=function(){function e(t,n){_classCallCheck(this,e),this.dueTime=t,this.scheduler=n}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new N(e,this.dueTime,this.scheduler))}}]),e}(),N=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,r,o){var i;return _classCallCheck(this,n),(i=t.call(this,e)).dueTime=r,i.scheduler=o,i.debouncedSubscription=null,i.lastValue=null,i.hasValue=!1,i}return _createClass(n,[{key:"_next",value:function(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(j,this.dueTime,this))}},{key:"_complete",value:function(){this.debouncedNext(),this.destination.complete()}},{key:"debouncedNext",value:function(){if(this.clearDebounce(),this.hasValue){var e=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}},{key:"clearDebounce",value:function(){var e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}]),n}(O.a);function j(e){e.debouncedNext()}var M=n("/uUt"),q=n("vkgz"),A=n("eIep"),H=n("JIr8"),D=n("ITiG"),G=n("HR6+");function K(e,t){if(1&e&&s.Nb(0,"ngb-highlight",8),2&e){var n=t.result,r=t.term,o=s.fc();s.mc("result",o.getProductName(n))("term",r)}}function L(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div"),s.Rb(1,"div",9),s.Rb(2,"div",10),s.Rb(3,"div",11),s.Jc(4),s.Qb(),s.Rb(5,"div",12),s.Nb(6,"input",13),s.Qb(),s.Rb(7,"div",14),s.Nb(8,"input",15),s.Qb(),s.Rb(9,"div",14),s.Rb(10,"input",16),s.dc("change",(function(){return s.zc(n),s.fc().updateTotal()})),s.Qb(),s.Qb(),s.Rb(11,"div",17),s.Rb(12,"label",7),s.Jc(13),s.Qb(),s.Qb(),s.Rb(14,"div",18),s.Rb(15,"button",19),s.dc("click",(function(){s.zc(n);var e=t.index;return s.fc().onRemoveItem(e)})),s.Jc(16,"Remove"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){var r=t.index,o=s.fc(),i=s.wc(1);s.zb(1),s.mc("formGroupName",r),s.zb(3),s.Lc("Item ",r+1," : "),s.zb(2),s.Eb("is-invalid",o.searchFailed),s.mc("ngbTypeahead",o.searchProduct)("resultTemplate",i)("inputFormatter",o.productFormatter),s.zb(2),s.oc("placeholder","Quantity ",r+1,""),s.zb(2),s.oc("placeholder","Purchase_price ",r+1,""),s.zb(3),s.Kc(o.parent.value.items[r].quantity*o.parent.value.items[r].purchase_price)}}var U,E=((U=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.productService=t,this.fb=n,this.removeItem=new s.n,this.searching=!1,this.searchFailed=!1,this.total=0,this.searchProduct=function(e){return e.pipe(T(300),Object(M.a)(),Object(q.a)((function(){return r.searching=!0})),Object(A.a)((function(e){return r.productService.search(e).pipe(Object(q.a)((function(e){r.searchFailed=!1})),Object(H.a)((function(){return r.searchFailed=!0,Object(w.a)([])})))})),Object(q.a)((function(){return r.searching=!1})))},this.productFormatter=function(e){if(e)return"".concat(e.name," [S: ").concat(e.size,"] [P: ").concat(e.price,"]")}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"getProductName",value:function(e){if(e)return"".concat(e.name," [S: ").concat(e.size,"] [P: ").concat(e.price,"]")}},{key:"onRemoveItem",value:function(e){this.removeItem.emit(e)}},{key:"updateTotal",value:function(){for(var e=this.parent.get("items"),t=0,n=0;n<e.length;n++)t+=e.value[n].quantity*e.value[n].purchase_price;this.total=t}}]),e}()).\u0275fac=function(e){return new(e||U)(s.Mb(G.a),s.Mb(_.d))},U.\u0275cmp=s.Gb({type:U,selectors:[["inventory-item-form"]],inputs:{parent:"parent"},outputs:{removeItem:"removeItem"},decls:13,vars:3,consts:[["rt",""],[3,"formGroup"],["formArrayName","items"],[4,"ngFor","ngForOf"],[1,"row"],[1,"offset-md-7","col-md-1"],[1,"form-group","col-1","pl-0","pr-1","text-right"],[1,"form-control","text-right"],[3,"result","term"],[3,"formGroupName"],[1,"form-row"],[1,"col-1"],[1,"form-group","col-md-3"],["id","product","type","text","formControlName","product","placeholder","Product name or serial number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],[1,"form-group","col-2"],["formControlName","quantity","id","quantity",1,"form-control",3,"placeholder"],["formControlName","purchase_price","id","purchase_price",1,"form-control",3,"placeholder","change"],[1,"form-group","col-1"],[1,"form-group","col-auto"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(e,t){1&e&&(s.Hc(0,K,1,2,"ng-template",null,0,s.Ic),s.Rb(2,"div",1),s.Rb(3,"div",2),s.Hc(4,L,17,10,"div",3),s.Rb(5,"div",4),s.Rb(6,"div",5),s.Rb(7,"strong"),s.Jc(8," Total"),s.Qb(),s.Qb(),s.Rb(9,"div",6),s.Rb(10,"label",7),s.Rb(11,"strong"),s.Jc(12),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(2),s.mc("formGroup",t.parent),s.zb(2),s.mc("ngForOf",t.parent.controls.items.controls),s.zb(8),s.Kc(t.total))},directives:[_.n,_.g,_.c,d.n,h.a,_.h,_.b,h.f,_.m,_.f],styles:[""]}),U);function B(e,t){if(1&e&&s.Nb(0,"ngb-highlight",28),2&e){var n=t.term;s.mc("result",t.result.name)("term",n)}}function V(e,t){1&e&&(s.Rb(0,"small",29),s.Jc(1," Reference required "),s.Qb())}var $,X=function(e,t,n){return{disabled:e,"btn-warning":t,"btn-success":n}},Y=(($=function(){function e(t,n,r){var o=this;_classCallCheck(this,e),this.fb=t,this.storehouseService=n,this.userService=r,this.create=new s.n,this.exists=!1,this.mouseoverShifting=!1,this.searching=!1,this.searchFailed=!1,this.searchStorehouse=function(e){return e.pipe(T(300),Object(M.a)(),Object(q.a)((function(){return o.searching=!0})),Object(A.a)((function(e){return o.storehouseService.search(e).pipe(Object(q.a)((function(e){o.searchFailed=!1})),Object(H.a)((function(){return o.searchFailed=!0,Object(w.a)([])})))})),Object(q.a)((function(){return o.searching=!1})))},this.searchUser=function(e){return e.pipe(T(300),Object(M.a)(),Object(q.a)((function(){return o.searching=!0})),Object(A.a)((function(e){return o.userService.search(e).pipe(Object(q.a)((function(e){o.searchFailed=!1})),Object(H.a)((function(){return o.searchFailed=!0,Object(w.a)([])})))})),Object(q.a)((function(){return o.searching=!1})))},this.storehouseFormatter=function(e){if(e)return"".concat(e.name," [").concat(e.storekeeper_number,"]")},this.userFormatter=function(e){if(e)return"".concat(e.name," [").concat(e.phone,"]")},this.createForm()}return _createClass(e,[{key:"ngOnChanges",value:function(e){}},{key:"createForm",value:function(){this.form=this.fb.group({inventoryType:["",_.u.required],reference:["",_.u.required],storehouse:["",_.u.required],supplier:["",_.u.required],items:this.fb.array([this.createInventoryItem()])})}},{key:"pushInventoryItem",value:function(){this.form.get("items").push(this.createInventoryItem())}},{key:"createInventoryItem",value:function(){return this.fb.group({product:["",_.u.required],quantity:["",_.u.required],purchase_price:["",_.u.required]})}},{key:"onRemoveInventoryItem",value:function(e){this.form.get("items").removeAt(e)}},{key:"submit",value:function(){this.form.valid&&this.create.emit(this.form.value)}}]),e}()).\u0275fac=function(e){return new(e||$)(s.Mb(_.d),s.Mb(a.a),s.Mb(D.a))},$.\u0275cmp=s.Gb({type:$,selectors:[["inventory-form"]],inputs:{inventory:"inventory"},outputs:{create:"create"},features:[s.xb],decls:45,vars:19,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["type","button","routerLink","/dashboard/inventory",1,"btn","btn-success","btn-sm"],[1,"fa","fa-list"],["rt",""],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"col-md-6","mb-3"],["for","reference"],["type","text","id","reference","formControlName","reference","placeholder","Inventory Number ",1,"form-control"],["class","text-danger",4,"ngIf"],["for","inventoryType"],["id","inventoryType","formControlName","inventoryType",1,"form-control"],["value","","selected",""],["value","in"],["value","transfer"],["value","sample"],["value","damage"],["for","storehouse"],["id","storehouse","type","text","formControlName","storehouse","placeholder","Shop name or owner number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],["for","supplier"],["id","supplier","type","text","formControlName","supplier","placeholder","Supplier name or phone number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],[1,"row"],[1,"col-md-12"],[3,"parent","removeItem"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"ngClass"],[3,"result","term"],[1,"text-danger"]],template:function(e,t){if(1&e&&(s.Rb(0,"nav",0),s.Rb(1,"a",1),s.Jc(2,"Inventory Form"),s.Qb(),s.Rb(3,"a",2),s.Nb(4,"i",3),s.Jc(5," INVENTORY LIST "),s.Qb(),s.Qb(),s.Hc(6,B,1,2,"ng-template",null,4,s.Ic),s.Rb(8,"form",5),s.dc("ngSubmit",(function(){return t.submit()})),s.Rb(9,"div",6),s.Rb(10,"div",7),s.Rb(11,"label",8),s.Jc(12,"Inventory Number* "),s.Qb(),s.Nb(13,"input",9),s.Hc(14,V,2,0,"small",10),s.Qb(),s.Rb(15,"div",7),s.Rb(16,"label",11),s.Jc(17,"Inventory Type *"),s.Qb(),s.Rb(18,"select",12),s.Rb(19,"option",13),s.Jc(20," N/A "),s.Qb(),s.Rb(21,"option",14),s.Jc(22," In "),s.Qb(),s.Rb(23,"option",15),s.Jc(24," Transfer "),s.Qb(),s.Rb(25,"option",16),s.Jc(26," Sample "),s.Qb(),s.Rb(27,"option",17),s.Jc(28," Damage "),s.Qb(),s.Qb(),s.Qb(),s.Rb(29,"div",7),s.Rb(30,"label",18),s.Jc(31,"Storehouse"),s.Qb(),s.Nb(32,"input",19),s.Qb(),s.Rb(33,"div",7),s.Rb(34,"label",20),s.Jc(35,"Supplier"),s.Qb(),s.Nb(36,"input",21),s.Qb(),s.Qb(),s.Rb(37,"div",22),s.Rb(38,"div",23),s.Rb(39,"inventory-item-form",24),s.dc("removeItem",(function(e){return t.onRemoveInventoryItem(e)})),s.Qb(),s.Qb(),s.Rb(40,"button",25),s.dc("click",(function(){return t.pushInventoryItem()})),s.Jc(41," Add Inventory Item "),s.Qb(),s.Qb(),s.Rb(42,"div",26),s.Rb(43,"button",27),s.Jc(44),s.Qb(),s.Qb(),s.Qb()),2&e){var n=s.wc(7);s.zb(8),s.mc("formGroup",t.form),s.zb(6),s.mc("ngIf",t.form.controls.reference.errors&&t.form.controls.reference.touched),s.zb(18),s.Eb("is-invalid",t.searchFailed),s.mc("ngbTypeahead",t.searchStorehouse)("resultTemplate",n)("inputFormatter",t.storehouseFormatter),s.zb(4),s.Eb("is-invalid",t.searchFailed),s.mc("ngbTypeahead",t.searchUser)("resultTemplate",n)("inputFormatter",t.userFormatter),s.zb(3),s.mc("parent",t.form),s.zb(4),s.mc("ngClass",s.sc(15,X,t.form.invalid,t.exists,!t.exists)),s.zb(1),s.Lc(" ",t.exists?"Update":"Create"," ")}},directives:[h.d,o.d,_.w,_.n,_.g,_.b,_.m,_.f,d.o,_.t,_.q,_.v,h.f,E,d.m,h.a],styles:[""]}),$),Z=n("HF3I");function W(e,t){1&e&&s.Nb(0,"loading")}function ee(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",8),s.Rb(1,"strong"),s.Jc(2,"Success! "),s.Qb(),s.Jc(3),s.Rb(4,"button",9),s.dc("click",(function(){return s.zc(n),s.fc().onClose()})),s.Rb(5,"span",10),s.Jc(6,"\xd7"),s.Qb(),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(3),s.Lc(" ",r.message," ")}}function te(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",11),s.Rb(1,"strong"),s.Jc(2,"Failed! "),s.Qb(),s.Jc(3),s.Rb(4,"button",9),s.dc("click",(function(){return s.zc(n),s.fc().onClose()})),s.Rb(5,"span",10),s.Jc(6,"\xd7"),s.Qb(),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(3),s.Lc(" ",r.errorMessage," ")}}var ne,re=((ne=function(){function e(t){_classCallCheck(this,e),this.inventoryService=t,this.loading=!1,this.message="",this.errorMessage=""}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onCreateInventory",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,this.errorMessage="",this.message="",t.prev=1,t.next=4,this.inventoryService.create(e).toPromise();case 4:this.message="Inventory added",t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this.errorMessage=t.t0;case 10:this.loading=!1;case 11:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"onClose",value:function(){this.loading=!1,this.errorMessage="",this.message=""}}]),e}()).\u0275fac=function(e){return new(e||ne)(s.Mb(b))},ne.\u0275cmp=s.Gb({type:ne,selectors:[["app-add"]],decls:10,vars:3,consts:[[1,"container-fluid","component-head"],[1,"container-fluid"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"create"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Add Inventory"),s.Qb(),s.Qb(),s.Rb(3,"div",1),s.Hc(4,W,1,0,"loading",2),s.Hc(5,ee,7,1,"div",3),s.Hc(6,te,7,1,"div",4),s.Rb(7,"div",5),s.Rb(8,"div",6),s.Rb(9,"inventory-form",7),s.dc("create",(function(e){return t.onCreateInventory(e)})),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(4),s.mc("ngIf",t.loading),s.zb(1),s.mc("ngIf",t.message.length>0),s.zb(1),s.mc("ngIf",t.errorMessage.length>0))},directives:[d.o,Y,Z.a],styles:[""]}),ne),oe=n("KKTG");function ie(e,t){if(1&e&&(s.Rb(0,"tr"),s.Rb(1,"td"),s.Jc(2),s.Qb(),s.Rb(3,"td"),s.Jc(4),s.Qb(),s.Rb(5,"td"),s.Jc(6),s.Qb(),s.Rb(7,"td"),s.Jc(8),s.Qb(),s.Qb()),2&e){var n=t.$implicit;s.zb(2),s.Kc(n.product.name),s.zb(2),s.Kc(n.product.size),s.zb(2),s.Kc(n.quantity),s.zb(2),s.Kc(n.purchase_price)}}var ce,se=((ce=function(){function e(){_classCallCheck(this,e),this.details=new s.n}return _createClass(e,[{key:"onDetails",value:function(e){this.details.emit(e)}},{key:"onPrint",value:function(){window.print()}}]),e}()).\u0275fac=function(e){return new(e||ce)},ce.\u0275cmp=s.Gb({type:ce,selectors:[["product-stock-list"]],inputs:{productStockPage:"productStockPage",name:"name"},outputs:{details:"details"},decls:21,vars:2,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],[1,"btn","btn-sm","btn-primary","mx-1",3,"click"],[1,"fa","fa-print"],[1,"table","table-hover","table-bordered","table-responsive-sm"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s.Rb(0,"nav",0),s.Rb(1,"a",1),s.Jc(2,"Stock List of "),s.Rb(3,"strong"),s.Jc(4),s.Qb(),s.Qb(),s.Rb(5,"button",2),s.dc("click",(function(){return t.onPrint()})),s.Nb(6,"i",3),s.Jc(7," Print"),s.Qb(),s.Qb(),s.Rb(8,"table",4),s.Rb(9,"thead"),s.Rb(10,"tr"),s.Rb(11,"th"),s.Jc(12,"Product"),s.Qb(),s.Rb(13,"th"),s.Jc(14,"Size"),s.Qb(),s.Rb(15,"th"),s.Jc(16,"Quantity"),s.Qb(),s.Rb(17,"th"),s.Jc(18,"Purchase price"),s.Qb(),s.Qb(),s.Qb(),s.Rb(19,"tbody"),s.Hc(20,ie,9,4,"tr",5),s.Qb(),s.Qb()),2&e&&(s.zb(4),s.Kc(t.name),s.zb(16),s.mc("ngForOf",t.productStockPage.docs))},directives:[h.d,d.n],styles:[""],changeDetection:0}),ce);function ae(e,t){if(1&e){var n=s.Sb();s.Rb(0,"li",10),s.dc("click",(function(){s.zc(n);var e=t.$implicit;return s.fc(2).onSelectStorehouse(e._id)})),s.Jc(1),s.Qb()}if(2&e){var r=t.$implicit;s.zb(1),s.Mc(" ",r.name,"[",r.storekeeper_number,"]")}}function ue(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",5),s.Rb(1,"ul",6),s.Rb(2,"li",7),s.Jc(3,"Please select a "),s.Rb(4,"strong"),s.Jc(5," Storehouse from List "),s.Qb(),s.Qb(),s.Hc(6,ae,2,2,"li",8),s.Qb(),s.Rb(7,"pagination",9),s.dc("paginate",(function(e){return s.zc(n),s.fc().onChangeStorehousePage(e)})),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(6),s.mc("ngForOf",r.storehousePage.docs),s.zb(1),s.mc("page",r.storehousePage)("small",!0)}}function le(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",11),s.Rb(1,"product-stock-list",12),s.dc("details",(function(e){return s.zc(n),s.fc().onDetails(e)})),s.Qb(),s.Rb(2,"pagination",9),s.dc("paginate",(function(e){s.zc(n);var t=s.fc();return t.onChangeProductStockPage(null==t.storehouse?null:t.storehouse._id,e)})),s.Qb(),s.Rb(3,"button",13),s.dc("click",(function(){return s.zc(n),s.fc().onClose("list")})),s.Jc(4,"Close"),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(1),s.mc("name",r.storehouse.name)("productStockPage",r.productStockPage),s.zb(1),s.mc("page",r.productStockPage)("small",!1)}}var be,de=((be=function(){function e(t,n){_classCallCheck(this,e),this.storehouseService=t,this.productStockService=n,this.loading=!1,this.message="",this.errorMessage=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.getAllStorehouse()}},{key:"getAllStorehouse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"priority",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asc";return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return this.loading=!0,o.prev=1,o.next=4,this.storehouseService.getAll(e,t,n,r).toPromise();case 4:this.storehousePage=o.sent,o.next=10;break;case 7:o.prev=7,o.t0=o.catch(1),this.errorMessage=o.t0;case 10:this.loading=!1;case 11:case"end":return o.stop()}}),o,this,[[1,7]])})))}},{key:"onChangeStorehousePage",value:function(e){this.getAllStorehouse(e.pageNumber,e.limit,e.sort,e.order)}},{key:"onSelectStorehouse",value:function(e){var t=this.storehousePage.docs.find((function(t){return t._id==e}));this.storehouse=Object.assign({},t),this.getProductStockbyStorehouseId(e)}},{key:"getProductStockbyStorehouseId",value:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments.length>4&&void 0!==arguments[4]&&arguments[4],Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.productStockService.getProductStockByStorehouseId(e).toPromise();case 4:this.productStockPage=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this.errorMessage=t.t0;case 10:this.loading=!1;case 11:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"onChangeProductStockPage",value:function(e,t){this.getProductStockbyStorehouseId(e,t.pageNumber,t.limit,t.sort,t.order)}},{key:"onDetails",value:function(e){}},{key:"onClose",value:function(e){switch(e){case"details":this.productStock=null;break;case"list":this.productStockPage=null,this.storehouse=null}}}]),e}()).\u0275fac=function(e){return new(e||be)(s.Mb(a.a),s.Mb(oe.a))},be.\u0275cmp=s.Gb({type:be,selectors:[["app-stocks"]],decls:7,vars:2,consts:[[1,"container-fluid","component-head"],[1,"container"],[1,"row"],["class","col-md-3 d-print-none",4,"ngIf"],["class","col-12 col-md-9 bg-white pb-3",4,"ngIf"],[1,"col-md-3","d-print-none"],[1,"list-group","mb-1"],[1,"list-group-item","disabled"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[3,"page","small","paginate"],[1,"list-group-item",3,"click"],[1,"col-12","col-md-9","bg-white","pb-3"],[3,"name","productStockPage","details"],[1,"btn","btn-sm","btn-danger","d-print-none",3,"click"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Stocks"),s.Qb(),s.Qb(),s.Rb(3,"div",1),s.Rb(4,"div",2),s.Hc(5,ue,8,3,"div",3),s.Hc(6,le,5,4,"div",4),s.Qb(),s.Qb()),2&e&&(s.zb(5),s.mc("ngIf",null==t.storehousePage||null==t.storehousePage.docs?null:t.storehousePage.docs.length),s.zb(1),s.mc("ngIf",(null==t.productStockPage||null==t.productStockPage.docs?null:t.productStockPage.docs.length)&&!t.productStock))},directives:[d.o,d.n,f.a,se],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}"]}),be);function fe(e,t){if(1&e&&s.Nb(0,"ngb-highlight",24),2&e){var n=t.term;s.mc("result",t.result.name)("term",n)}}function he(e,t){1&e&&(s.Rb(0,"small",25),s.Jc(1," Reference required "),s.Qb())}var ve,pe=function(e){return{disabled:e}},me=((ve=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.fb=t,this.storehouseService=n,this.create=new s.n,this.mouseoverShifting=!1,this.searching=!1,this.searchFailed=!1,this.searchStorehouse=function(e){return e.pipe(T(300),Object(M.a)(),Object(q.a)((function(){return r.searching=!0})),Object(A.a)((function(e){return r.storehouseService.search(e).pipe(Object(q.a)((function(e){r.searchFailed=!1})),Object(H.a)((function(){return r.searchFailed=!0,Object(w.a)([])})))})),Object(q.a)((function(){return r.searching=!1})))},this.storehouseFormatter=function(e){if(e)return"".concat(e.name," [").concat(e.storekeeper_number,"]")},this.createForm()}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"createForm",value:function(){this.form=this.fb.group({inventoryType:["transfer",_.u.required],reference:["",_.u.required],from:["",_.u.required],storehouse:["",_.u.required],items:this.fb.array([this.createInventoryItem()])})}},{key:"pushInventoryItem",value:function(){this.form.get("items").push(this.createInventoryItem())}},{key:"createInventoryItem",value:function(){return this.fb.group({product:["",_.u.required],quantity:["",_.u.required],purchase_price:["",_.u.required]})}},{key:"onRemoveInventoryItem",value:function(e){this.form.get("items").removeAt(e)}},{key:"submit",value:function(){this.form.valid&&this.create.emit(this.form.value)}}]),e}()).\u0275fac=function(e){return new(e||ve)(s.Mb(_.d),s.Mb(a.a))},ve.\u0275cmp=s.Gb({type:ve,selectors:[["inventory-transfer-form"]],outputs:{create:"create"},decls:37,vars:16,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["type","button","routerLink","/dashboard/inventory",1,"btn","btn-success","btn-sm"],[1,"fa","fa-list"],["rt",""],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"col-md-6","mb-3"],["for","reference"],["type","text","id","reference","formControlName","reference","placeholder","Inventory Number ",1,"form-control"],["class","text-danger",4,"ngIf"],["for","inventoryType"],["id","inventoryType","formControlName","inventoryType",1,"form-control"],["value","transfer"],["for","source_storehouse"],["id","source_storehouse","type","text","formControlName","from","placeholder","From Storehouse name or owner number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],["for","storehouse"],["id","storehouse","type","text","formControlName","storehouse","placeholder","To Storehouse name or owner number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],[1,"row"],[1,"col-md-12"],[3,"parent","removeItem"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"ngClass"],[3,"result","term"],[1,"text-danger"]],template:function(e,t){if(1&e&&(s.Rb(0,"nav",0),s.Rb(1,"a",1),s.Jc(2,"Inventory Transfer form"),s.Qb(),s.Rb(3,"a",2),s.Nb(4,"i",3),s.Jc(5," INVENTORY LIST "),s.Qb(),s.Qb(),s.Hc(6,fe,1,2,"ng-template",null,4,s.Ic),s.Rb(8,"form",5),s.dc("ngSubmit",(function(){return t.submit()})),s.Rb(9,"div",6),s.Rb(10,"div",7),s.Rb(11,"label",8),s.Jc(12,"Inventory Number* "),s.Qb(),s.Nb(13,"input",9),s.Hc(14,he,2,0,"small",10),s.Qb(),s.Rb(15,"div",7),s.Rb(16,"label",11),s.Jc(17,"Inventory Type *"),s.Qb(),s.Rb(18,"select",12),s.Rb(19,"option",13),s.Jc(20," Transfer "),s.Qb(),s.Qb(),s.Qb(),s.Rb(21,"div",7),s.Rb(22,"label",14),s.Jc(23,"Source Storehouse*"),s.Qb(),s.Nb(24,"input",15),s.Qb(),s.Rb(25,"div",7),s.Rb(26,"label",16),s.Jc(27,"Destination Storehouse*"),s.Qb(),s.Nb(28,"input",17),s.Qb(),s.Qb(),s.Rb(29,"div",18),s.Rb(30,"div",19),s.Rb(31,"inventory-item-form",20),s.dc("removeItem",(function(e){return t.onRemoveInventoryItem(e)})),s.Qb(),s.Qb(),s.Rb(32,"button",21),s.dc("click",(function(){return t.pushInventoryItem()})),s.Jc(33," Add Inventory Item "),s.Qb(),s.Qb(),s.Rb(34,"div",22),s.Rb(35,"button",23),s.Jc(36," Transfer "),s.Qb(),s.Qb(),s.Qb()),2&e){var n=s.wc(7);s.zb(8),s.mc("formGroup",t.form),s.zb(6),s.mc("ngIf",t.form.controls.reference.errors&&t.form.controls.reference.touched),s.zb(10),s.Eb("is-invalid",t.searchFailed),s.mc("ngbTypeahead",t.searchStorehouse)("resultTemplate",n)("inputFormatter",t.storehouseFormatter),s.zb(4),s.Eb("is-invalid",t.searchFailed),s.mc("ngbTypeahead",t.searchStorehouse)("resultTemplate",n)("inputFormatter",t.storehouseFormatter),s.zb(3),s.mc("parent",t.form),s.zb(4),s.mc("ngClass",s.qc(14,pe,t.form.invalid))}},directives:[h.d,o.d,_.w,_.n,_.g,_.b,_.m,_.f,d.o,_.t,_.q,_.v,h.f,E,d.m,h.a],styles:[""]}),ve);function ge(e,t){1&e&&s.Nb(0,"loading")}function ye(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",8),s.Rb(1,"strong"),s.Jc(2,"Success! "),s.Qb(),s.Jc(3),s.Rb(4,"button",9),s.dc("click",(function(){return s.zc(n),s.fc().onClose()})),s.Rb(5,"span",10),s.Jc(6,"\xd7"),s.Qb(),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(3),s.Lc(" ",r.message," ")}}function Re(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",11),s.Rb(1,"strong"),s.Jc(2,"Failed! "),s.Qb(),s.Jc(3),s.Rb(4,"button",9),s.dc("click",(function(){return s.zc(n),s.fc().onClose()})),s.Rb(5,"span",10),s.Jc(6,"\xd7"),s.Qb(),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(3),s.Lc(" ",r.errorMessage," ")}}var Qe,ke,Ie=((ke=function(){function e(t){_classCallCheck(this,e),this.inventoryService=t,this.loading=!1,this.message="",this.errorMessage=""}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onCreateInventory",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),this.loading=!0,this.errorMessage="",this.message="",t.prev=1,t.next=4,this.inventoryService.transfer(e).toPromise();case 4:this.message="Inventory added",t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),this.errorMessage=t.t0;case 10:this.loading=!1;case 11:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"onClose",value:function(){this.loading=!1,this.errorMessage="",this.message=""}}]),e}()).\u0275fac=function(e){return new(e||ke)(s.Mb(b))},ke.\u0275cmp=s.Gb({type:ke,selectors:[["app-transfer"]],decls:10,vars:3,consts:[[1,"container-fluid","component-head"],[1,"container-fluid"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"create"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Inventory Transfer"),s.Qb(),s.Qb(),s.Rb(3,"div",1),s.Hc(4,ge,1,0,"loading",2),s.Hc(5,ye,7,1,"div",3),s.Hc(6,Re,7,1,"div",4),s.Rb(7,"div",5),s.Rb(8,"div",6),s.Rb(9,"inventory-transfer-form",7),s.dc("create",(function(e){return t.onCreateInventory(e)})),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(4),s.mc("ngIf",t.loading),s.zb(1),s.mc("ngIf",t.message.length>0),s.zb(1),s.mc("ngIf",t.errorMessage.length>0))},directives:[d.o,me,Z.a],styles:[""]}),ke),Se=((Qe=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Qe)},Qe.\u0275cmp=s.Gb({type:Qe,selectors:[["app-convert"]],decls:3,vars:0,consts:[[1,"container-fluid","component-head"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Inventory Convert"),s.Qb(),s.Qb())},styles:[""]}),Qe);function Pe(e,t){if(1&e){var n=s.Sb();s.Rb(0,"li",13),s.dc("click",(function(){s.zc(n);var e=t.$implicit;return s.fc(2).onSelectStorehouse(e._id)})),s.Jc(1),s.Qb()}if(2&e){var r=t.$implicit;s.zb(1),s.Mc(" ",r.name,"[",r.storekeeper_number,"]")}}function Ce(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",8),s.Rb(1,"ul",9),s.Rb(2,"li",10),s.Jc(3,"Please select a "),s.Rb(4,"strong"),s.Jc(5," Storehouse from List "),s.Qb(),s.Qb(),s.Hc(6,Pe,2,2,"li",11),s.Qb(),s.Rb(7,"pagination",12),s.dc("paginate",(function(e){return s.zc(n),s.fc().onChangeStorehousePage(e)})),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(6),s.mc("ngForOf",r.storehousePage.docs),s.zb(1),s.mc("page",r.storehousePage)("small",!0)}}function ze(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",14),s.Rb(1,"inventory-list",15),s.dc("details",(function(e){return s.zc(n),s.fc().onDetails(e)})),s.Qb(),s.Rb(2,"pagination",12),s.dc("paginate",(function(e){s.zc(n);var t=s.fc();return t.onChangeInventoryPage(null==t.storehouse?null:t.storehouse._id,e)})),s.Qb(),s.Rb(3,"button",16),s.dc("click",(function(){return s.zc(n),s.fc().onClose("list")})),s.Jc(4,"Close"),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(1),s.mc("inventoryPage",r.inventoryPage),s.zb(1),s.mc("page",r.inventoryPage)("small",!0)}}function Je(e,t){if(1&e){var n=s.Sb();s.Rb(0,"div",17),s.Nb(1,"inventory-details",18),s.Rb(2,"button",19),s.dc("click",(function(){return s.zc(n),s.fc().onClose("details")})),s.Jc(3,"Close"),s.Qb(),s.Rb(4,"button",20),s.dc("click",(function(){s.zc(n);var e=s.fc();return e.onApprove(e.inventory._id)})),s.Jc(5,"Approve"),s.Qb(),s.Qb()}if(2&e){var r=s.fc();s.zb(1),s.mc("inventory",r.inventory)}}function _e(e,t){1&e&&s.Nb(0,"loading")}var we,Oe,xe=[{path:"",component:J},{path:"add",component:re},{path:"add/:id",component:re},{path:"stocks",component:de},{path:"transfer",component:Ie},{path:"receive",component:(we=function(){function e(t,n){_classCallCheck(this,e),this.storehouseService=t,this.inventoryService=n,this.loading=!1,this.message="",this.errorMessage=""}return _createClass(e,[{key:"ngOnInit",value:function(){this.getAllStorehouse()}},{key:"getAllStorehouse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"priority",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asc";return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return this.loading=!0,o.prev=1,o.next=4,this.storehouseService.getAll(e,t,n,r).toPromise();case 4:this.storehousePage=o.sent,o.next=10;break;case 7:o.prev=7,o.t0=o.catch(1),this.errorMessage=o.t0;case 10:this.loading=!1;case 11:case"end":return o.stop()}}),o,this,[[1,7]])})))}},{key:"onChangeStorehousePage",value:function(e){this.getAllStorehouse(e.pageNumber,e.limit,e.sort,e.order)}},{key:"onSelectStorehouse",value:function(e){var t=this.storehousePage.docs.find((function(t){return t._id==e}));this.storehouse=Object.assign({},t),this.getAllUnapprovedInventories(e)}},{key:"getAllUnapprovedInventories",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"priority",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"asc";return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return this.loading=!0,i.prev=1,i.next=4,this.inventoryService.getUnapprovedInventories(e,t,n,r,o).toPromise();case 4:this.inventoryPage=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i.catch(1),this.errorMessage=i.t0;case 10:this.loading=!1;case 11:case"end":return i.stop()}}),i,this,[[1,7]])})))}},{key:"onChangeInventoryPage",value:function(e,t){this.getAllUnapprovedInventories(e,t.pageNumber,t.limit,t.sort,t.order)}},{key:"onDetails",value:function(e){var t=this.inventoryPage.docs.find((function(t){return t._id==e}));this.inventory=Object.assign({},t)}},{key:"onClose",value:function(e){switch(e){case"details":this.inventory=null;break;case"list":this.inventoryPage=null,this.storehouse=null}}},{key:"onApprove",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,t.next=4,this.inventoryService.approveTransferedInventories(e).toPromise();case 4:this.onClose("details"),this.getAllUnapprovedInventories(this.storehouse._id),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),this.errorMessage=t.t0;case 11:this.loading=!1;case 12:case"end":return t.stop()}}),t,this,[[1,8]])})))}}]),e}(),we.\u0275fac=function(e){return new(e||we)(s.Mb(a.a),s.Mb(b))},we.\u0275cmp=s.Gb({type:we,selectors:[["app-receive"]],decls:10,vars:4,consts:[[1,"container-fluid","component-head"],[1,"container"],[1,"row"],["class","col-md-3 d-print-none",4,"ngIf"],["class","col-12 bg-white pb-3",4,"ngIf"],["class","col-12 bg-white px-0 pb-3",4,"ngIf"],[1,"col-9"],[4,"ngIf"],[1,"col-md-3","d-print-none"],[1,"list-group","mb-1"],[1,"list-group-item","disabled"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[3,"page","small","paginate"],[1,"list-group-item",3,"click"],[1,"col-12","bg-white","pb-3"],[3,"inventoryPage","details"],[1,"btn","btn-sm","btn-danger","d-print-none",3,"click"],[1,"col-12","bg-white","px-0","pb-3"],[3,"inventory"],[1,"btn","btn-sm","btn-danger","d-print-none","mx-1",3,"click"],[1,"btn","btn-sm","btn-success","d-print-none","mx-1",3,"click"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Receive Inventory"),s.Qb(),s.Qb(),s.Rb(3,"div",1),s.Rb(4,"div",2),s.Hc(5,Ce,8,3,"div",3),s.Hc(6,ze,5,3,"div",4),s.Hc(7,Je,6,1,"div",5),s.Rb(8,"div",6),s.Hc(9,_e,1,0,"loading",7),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(5),s.mc("ngIf",(null==t.storehousePage||null==t.storehousePage.docs?null:t.storehousePage.docs.length)&&!(null!=t.inventoryPage&&null!=t.inventoryPage.docs&&t.inventoryPage.docs.length)),s.zb(1),s.mc("ngIf",(null==t.inventoryPage||null==t.inventoryPage.docs?null:t.inventoryPage.docs.length)&&!t.inventory),s.zb(1),s.mc("ngIf",t.inventory),s.zb(2),s.mc("ngIf",t.loading))},directives:[d.o,d.n,f.a,m,k,Z.a],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}"]}),we)},{path:"convert",component:Se}],Te=((Oe=function e(){_classCallCheck(this,e)}).\u0275mod=s.Kb({type:Oe}),Oe.\u0275inj=s.Jb({factory:function(e){return new(e||Oe)},imports:[[i.a,o.e.forChild(xe)]]}),Oe)}}]);