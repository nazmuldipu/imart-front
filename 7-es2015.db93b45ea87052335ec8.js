(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{I9cL:function(e,t,n){"use strict";n.r(t),n.d(t,"ROUTES",(function(){return ve})),n.d(t,"InventoryModule",(function(){return ye}));var r=n("tyNb"),o=n("KZX/"),i=n("mrSG"),s=n("fXoL"),c=n("Qjeu"),a=n("tk/3"),l=n("jgEc");let b=(()=>{class e{constructor(e){this.dataSource=e,this.inventoryUrl="api/inventory"}create(e){const t=[];for(let n=0;n<e.items.length;n++){const r=e.items[n];t.push({productId:r.product._id,quantity:r.quantity,purchase_price:r.purchase_price})}return this.dataSource.sendRequest("POST",this.inventoryUrl,{inventoryType:e.inventoryType,reference:e.reference,storehouseId:e.storehouse._id,supplierId:e.supplier._id,items:t},!0,null)}transfer(e){const t=[];for(let n=0;n<e.items.length;n++){const r=e.items[n];t.push({productId:r.product._id,quantity:r.quantity,purchase_price:r.purchase_price})}return this.dataSource.sendRequest("POST",this.inventoryUrl+"/transfer",{inventoryType:e.inventoryType,reference:e.reference,storehouseId:e.storehouse._id,fromId:e.from._id,items:t},!0,null)}getUnapprovedInventories(e,t,n,r,o){const i=this.generateParam(t,n,r,o);return this.dataSource.sendRequest("GET",this.inventoryUrl+"/transfer/storehouse/"+e,null,!0,i)}approveTransferedInventories(e){return this.dataSource.sendRequest("PUT",this.inventoryUrl+"/transfer/approve/"+e,null,!0,null)}getInventory(e){return this.dataSource.sendRequest("GET",this.inventoryUrl+"/"+e,null,!0,null)}getInventoryByStorehouse(e,t,n,r,o){const i=this.generateParam(t,n,r,o);return this.dataSource.sendRequest("GET",this.inventoryUrl+"/storehouse/"+e,null,!0,i)}generateParam(e,t,n,r){return(new a.d).set("page",e.toString()).set("limit",t.toString()).set("sort",n).set("order",r)}}return e.\u0275fac=function(t){return new(t||e)(s.Zb(l.a))},e.\u0275prov=s.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var u=n("ofXK"),d=n("uEz7"),h=n("1kSV");function m(e,t){if(1&e){const e=s.Sb();s.Rb(0,"tr"),s.Rb(1,"td"),s.Jc(2),s.gc(3,"date"),s.Qb(),s.Rb(4,"td"),s.Jc(5),s.Qb(),s.Rb(6,"td"),s.Jc(7),s.Qb(),s.Rb(8,"td"),s.Jc(9),s.Qb(),s.Rb(10,"td",5),s.Rb(11,"div",6),s.Rb(12,"button",7),s.dc("click",(function(){s.zc(e);const n=t.$implicit;return s.fc().onDetails(n._id)})),s.Nb(13,"i",8),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=t.$implicit;s.zb(2),s.Kc(s.ic(3,4,e.updatedAt,"medium")),s.zb(3),s.Kc(null==e?null:e.reference),s.zb(2),s.Kc(e.inventoryType),s.zb(2),s.Kc(null==e||null==e.items?null:e.items.length)}}let p=(()=>{class e{constructor(){this.details=new s.n}onDetails(e){this.details.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["inventory-list"]],inputs:{inventoryPage:"inventoryPage"},outputs:{details:"details"},decls:20,vars:1,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["routerLink","/dashboard/inventory/add",1,"btn","btn-success","btn-sm"],[1,"table","table-hover","table-bordered","table-responsive-sm"],[4,"ngFor","ngForOf"],[1,"text-right"],["role","group","aria-label","Basic example",1,"btn-group","rounded"],["type","button",1,"btn","btn-light","border","py-0","px-1",3,"click"],[1,"fa","fa-file-text-o"]],template:function(e,t){1&e&&(s.Rb(0,"nav",0),s.Rb(1,"a",1),s.Jc(2,"Inventory List"),s.Qb(),s.Rb(3,"a",2),s.Jc(4," + ADD Inventory "),s.Qb(),s.Qb(),s.Rb(5,"table",3),s.Rb(6,"thead"),s.Rb(7,"tr"),s.Rb(8,"th"),s.Jc(9,"Updated"),s.Qb(),s.Rb(10,"th"),s.Jc(11,"Reference"),s.Qb(),s.Rb(12,"th"),s.Jc(13,"Inventory Type"),s.Qb(),s.Rb(14,"th"),s.Jc(15,"Number of Products"),s.Qb(),s.Rb(16,"th"),s.Jc(17,"Actions"),s.Qb(),s.Qb(),s.Qb(),s.Rb(18,"tbody"),s.Hc(19,m,14,7,"tr",4),s.Qb(),s.Qb()),2&e&&(s.zb(19),s.mc("ngForOf",t.inventoryPage.docs))},directives:[h.d,r.d,u.n],pipes:[u.e],styles:[""],changeDetection:0}),e})();function f(e,t){if(1&e&&(s.Rb(0,"div",6),s.Rb(1,"label",12),s.Jc(2,"Supplier: "),s.Qb(),s.Rb(3,"label",13),s.Jc(4),s.Qb(),s.Qb()),2&e){const e=s.fc();s.zb(4),s.Mc("",null==e.inventory||null==e.inventory.supplier?null:e.inventory.supplier.name,"[",null==e.inventory||null==e.inventory.supplier?null:e.inventory.supplier.phone,"]")}}function g(e,t){if(1&e&&(s.Rb(0,"div",6),s.Rb(1,"label",12),s.Jc(2,"From Storehouse: "),s.Qb(),s.Rb(3,"label",13),s.Jc(4),s.Qb(),s.Qb()),2&e){const e=s.fc();s.zb(4),s.Kc(null==e.inventory||null==e.inventory.from?null:e.inventory.from.name)}}function v(e,t){if(1&e&&(s.Rb(0,"tr"),s.Rb(1,"td"),s.Jc(2),s.Qb(),s.Rb(3,"td"),s.Jc(4),s.Qb(),s.Rb(5,"td"),s.Jc(6),s.Qb(),s.Rb(7,"td"),s.Jc(8),s.gc(9,"currency"),s.Qb(),s.Rb(10,"td",17),s.Jc(11),s.gc(12,"currency"),s.Qb(),s.Qb()),2&e){const e=t.$implicit,n=t.index;s.zb(2),s.Kc(n+1),s.zb(2),s.Kc(null==e||null==e.product?null:e.product.slug),s.zb(2),s.Kc(null==e?null:e.quantity),s.zb(2),s.Kc(s.jc(9,5,null==e?null:e.purchase_price,"BDT","symbol-narrow")),s.zb(3),s.Kc(s.jc(12,9,(null==e?null:e.quantity)*(null==e?null:e.purchase_price),"BDT","symbol-narrow"))}}let y=(()=>{class e{constructor(){}ngOnChanges(e){if(e&&this.inventory){let e=0,t=0;for(let n=0;n<this.inventory.items.length;n++){const r=this.inventory.items[n];e+=r.quantity,t+=r.purchase_price*r.quantity}this.total={price:t,quantity:e}}}onPrint(){window.print()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["inventory-details"]],inputs:{inventory:"inventory"},features:[s.xb],decls:72,vars:18,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["routerLink","//dashboard/inventory/add",1,"btn","btn-success","btn-sm","mx-1"],[1,"btn","btn-sm","btn-primary","mx-1",3,"click"],[1,"fa","fa-print"],[1,"form-group","row","m-0","my-1"],[1,"col-sm-6","p-0"],["for","createdAt",1,"col-auto","col-form-label"],["id","createdAt",1,"col-form-label"],[1,"form-group","row","border-top","m-0","my-1"],["for","createdBy",1,"col-auto","col-form-label"],["id","createdBy",1,"col-form-label"],["for","shop",1,"col-auto","col-form-label"],["id","shop",1,"col-form-label"],["class","col-sm-6 p-0",4,"ngIf"],[1,"px-3"],[1,"table","table-hover","table-bordered","table-responsive-sm"],[1,"text-right"],[4,"ngFor","ngForOf"],["colspan","5"]],template:function(e,t){1&e&&(s.Rb(0,"nav",0),s.Rb(1,"a",1),s.Jc(2,"Inventory Details"),s.Qb(),s.Rb(3,"div"),s.Rb(4,"a",2),s.Jc(5," + ADD Inventory "),s.Qb(),s.Rb(6,"button",3),s.dc("click",(function(){return t.onPrint()})),s.Nb(7,"i",4),s.Jc(8," Print"),s.Qb(),s.Qb(),s.Qb(),s.Rb(9,"div",5),s.Rb(10,"div",6),s.Rb(11,"label",7),s.Jc(12,"Ref:"),s.Qb(),s.Rb(13,"label",8),s.Jc(14),s.Qb(),s.Qb(),s.Rb(15,"div",6),s.Rb(16,"label",7),s.Jc(17,"Inventory Type:"),s.Qb(),s.Rb(18,"label",8),s.Jc(19),s.Qb(),s.Qb(),s.Qb(),s.Rb(20,"div",9),s.Rb(21,"div",6),s.Rb(22,"label",7),s.Jc(23,"Updated at: "),s.Qb(),s.Rb(24,"label",8),s.Jc(25),s.gc(26,"date"),s.Qb(),s.Qb(),s.Rb(27,"div",6),s.Rb(28,"label",10),s.Jc(29,"Updated by: "),s.Qb(),s.Rb(30,"label",11),s.Jc(31),s.Qb(),s.Qb(),s.Qb(),s.Rb(32,"div",9),s.Rb(33,"div",6),s.Rb(34,"label",12),s.Jc(35,"Storehouse: "),s.Qb(),s.Rb(36,"label",13),s.Jc(37),s.Qb(),s.Qb(),s.Hc(38,f,5,2,"div",14),s.Hc(39,g,5,1,"div",14),s.Qb(),s.Rb(40,"div",15),s.Rb(41,"table",16),s.Rb(42,"thead"),s.Rb(43,"tr"),s.Rb(44,"th"),s.Jc(45,"Sl"),s.Qb(),s.Rb(46,"th"),s.Jc(47,"Product"),s.Qb(),s.Rb(48,"th"),s.Jc(49,"Quantity"),s.Qb(),s.Rb(50,"th"),s.Jc(51,"Purchase Rate"),s.Qb(),s.Rb(52,"th",17),s.Jc(53,"Amount"),s.Qb(),s.Qb(),s.Qb(),s.Rb(54,"tbody"),s.Hc(55,v,13,13,"tr",18),s.Rb(56,"tr"),s.Nb(57,"td",19),s.Qb(),s.Qb(),s.Rb(58,"tfoot"),s.Rb(59,"tr"),s.Nb(60,"td"),s.Rb(61,"td"),s.Rb(62,"strong"),s.Jc(63," Grand Total"),s.Qb(),s.Qb(),s.Rb(64,"td"),s.Rb(65,"strong"),s.Jc(66),s.Qb(),s.Qb(),s.Nb(67,"td"),s.Rb(68,"td",17),s.Rb(69,"strong"),s.Jc(70),s.gc(71,"currency"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(14),s.Kc(null==t.inventory?null:t.inventory.reference),s.zb(5),s.Kc(null==t.inventory?null:t.inventory.inventoryType),s.zb(6),s.Kc(s.ic(26,11,null==t.inventory?null:t.inventory.updatedAt,"medium")),s.zb(6),s.Mc("",null==t.inventory||null==t.inventory.updatedBy?null:t.inventory.updatedBy.name,"[",null==t.inventory||null==t.inventory.updatedBy?null:t.inventory.updatedBy.phone,"]"),s.zb(6),s.Kc(null==t.inventory||null==t.inventory.storehouse?null:t.inventory.storehouse.name),s.zb(1),s.mc("ngIf",null==t.inventory?null:t.inventory.supplier),s.zb(1),s.mc("ngIf",null==t.inventory?null:t.inventory.from),s.zb(16),s.mc("ngForOf",null==t.inventory?null:t.inventory.items),s.zb(11),s.Lc(" ",null==t.total?null:t.total.quantity," "),s.zb(4),s.Kc(s.jc(71,14,null==t.total?null:t.total.price,"BDT","symbol-narrow")))},directives:[h.d,r.d,u.o,u.n],pipes:[u.e,u.c],styles:["[_nghost-%COMP%]{font-family:CourierPrime}.tbrow[_ngcontent-%COMP%]:hover{background-color:#81ffd3}"],changeDetection:0}),e})();function R(e,t){if(1&e){const e=s.Sb();s.Rb(0,"li",11),s.dc("click",(function(){s.zc(e);const n=t.$implicit;return s.fc(2).onSelectStorehouse(n._id)})),s.Jc(1),s.Qb()}if(2&e){const e=t.$implicit;s.zb(1),s.Mc(" ",e.name,"[",e.storekeeper_number,"]")}}function Q(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",6),s.Rb(1,"ul",7),s.Rb(2,"li",8),s.Jc(3,"Please select a "),s.Rb(4,"strong"),s.Jc(5," Storehouse from List "),s.Qb(),s.Qb(),s.Hc(6,R,2,2,"li",9),s.Qb(),s.Rb(7,"pagination",10),s.dc("paginate",(function(t){return s.zc(e),s.fc().onChangeStorehousePage(t)})),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(6),s.mc("ngForOf",e.storehousePage.docs),s.zb(1),s.mc("page",e.storehousePage)("small",!0)}}function I(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",12),s.Rb(1,"inventory-list",13),s.dc("details",(function(t){return s.zc(e),s.fc().onDetails(t)})),s.Qb(),s.Rb(2,"pagination",10),s.dc("paginate",(function(t){s.zc(e);const n=s.fc();return n.onChangeInventoryPage(null==n.storehouse?null:n.storehouse._id,t)})),s.Qb(),s.Rb(3,"button",14),s.dc("click",(function(){return s.zc(e),s.fc().onClose("list")})),s.Jc(4,"Close"),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(1),s.mc("inventoryPage",e.inventoryPage),s.zb(1),s.mc("page",e.inventoryPage)("small",!0)}}function S(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",15),s.Nb(1,"inventory-details",16),s.Rb(2,"button",14),s.dc("click",(function(){return s.zc(e),s.fc().onClose("details")})),s.Jc(3,"Close"),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(1),s.mc("inventory",e.inventory)}}let P=(()=>{class e{constructor(e,t){this.storehouseService=e,this.inventoryService=t,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){this.getAllStorehouse()}getAllStorehouse(e=1,t=8,n="priority",r="asc"){return Object(i.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this.storehousePage=yield this.storehouseService.getAll(e,t,n,r).toPromise()}catch(o){this.errorMessage=o}this.loading=!1}))}getInventoryByStorehouseId(e,t=1,n=8,r="priority",o="asc"){return Object(i.a)(this,void 0,void 0,(function*(){this.loading=!0;try{console.log(e),this.inventoryPage=yield this.inventoryService.getInventoryByStorehouse(e,t,n,r,o).toPromise()}catch(i){this.errorMessage=i}this.loading=!1}))}onChangeStorehousePage(e){this.getAllStorehouse(e.pageNumber,e.limit,e.sort,e.order)}onDetails(e){const t=this.inventoryPage.docs.find(t=>t._id==e);this.inventory=Object.assign({},t)}onEdit(e){}onChangeInventoryPage(e,t){this.getInventoryByStorehouseId(e,t.pageNumber,t.limit,t.sort,t.order)}onSelectStorehouse(e){const t=this.storehousePage.docs.find(t=>t._id==e);this.storehouse=Object.assign({},t),this.getInventoryByStorehouseId(e)}onClose(e){switch(e){case"details":this.inventory=null;break;case"list":this.inventoryPage=null,this.storehouse=null}}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(c.a),s.Mb(b))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-index"]],decls:8,vars:3,consts:[[1,"container-fluid","component-head"],[1,"container"],[1,"row"],["class","col-md-3",4,"ngIf"],["class","col-12 bg-white pb-3",4,"ngIf"],["class","col-12 bg-white px-0 pb-3",4,"ngIf"],[1,"col-md-3"],[1,"list-group","mb-1"],[1,"list-group-item","disabled"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[3,"page","small","paginate"],[1,"list-group-item",3,"click"],[1,"col-12","bg-white","pb-3"],[3,"inventoryPage","details"],[1,"btn","btn-sm","btn-danger","d-print-none",3,"click"],[1,"col-12","bg-white","px-0","pb-3"],[3,"inventory"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Inventory List"),s.Qb(),s.Qb(),s.Rb(3,"div",1),s.Rb(4,"div",2),s.Hc(5,Q,8,3,"div",3),s.Hc(6,I,5,3,"div",4),s.Hc(7,S,4,1,"div",5),s.Qb(),s.Qb()),2&e&&(s.zb(5),s.mc("ngIf",(null==t.storehousePage||null==t.storehousePage.docs?null:t.storehousePage.docs.length)&&!(null!=t.inventoryPage&&null!=t.inventoryPage.docs&&t.inventoryPage.docs.length)),s.zb(1),s.mc("ngIf",(null==t.inventoryPage||null==t.inventoryPage.docs?null:t.inventoryPage.docs.length)&&!t.inventory),s.zb(1),s.mc("ngIf",t.inventory))},directives:[u.o,u.n,d.a,p,y],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}"]}),e})();var z=n("3Pt+"),J=n("LRne"),k=n("7o/Q"),O=n("D0XW");function w(e,t=O.a){return n=>n.lift(new T(e,t))}class T{constructor(e,t){this.dueTime=e,this.scheduler=t}call(e,t){return t.subscribe(new C(e,this.dueTime,this.scheduler))}}class C extends k.a{constructor(e,t,n){super(e),this.dueTime=t,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(e){this.clearDebounce(),this.lastValue=e,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(F,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:e}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(e)}}clearDebounce(){const e=this.debouncedSubscription;null!==e&&(this.remove(e),e.unsubscribe(),this.debouncedSubscription=null)}}function F(e){e.debouncedNext()}var x=n("/uUt"),N=n("vkgz"),M=n("eIep"),_=n("JIr8"),j=n("ITiG"),q=n("HR6+");function A(e,t){if(1&e&&s.Nb(0,"ngb-highlight",8),2&e){const e=t.result,n=t.term,r=s.fc();s.mc("result",r.getProductName(e))("term",n)}}function H(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div"),s.Rb(1,"div",9),s.Rb(2,"div",10),s.Rb(3,"div",11),s.Jc(4),s.Qb(),s.Rb(5,"div",12),s.Nb(6,"input",13),s.Qb(),s.Rb(7,"div",14),s.Nb(8,"input",15),s.Qb(),s.Rb(9,"div",14),s.Rb(10,"input",16),s.dc("change",(function(){return s.zc(e),s.fc().updateTotal()})),s.Qb(),s.Qb(),s.Rb(11,"div",17),s.Rb(12,"label",7),s.Jc(13),s.Qb(),s.Qb(),s.Rb(14,"div",18),s.Rb(15,"button",19),s.dc("click",(function(){s.zc(e);const n=t.index;return s.fc().onRemoveItem(n)})),s.Jc(16,"Remove"),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=t.index,n=s.fc(),r=s.wc(1);s.zb(1),s.mc("formGroupName",e),s.zb(3),s.Lc("Item ",e+1," : "),s.zb(2),s.Eb("is-invalid",n.searchFailed),s.mc("ngbTypeahead",n.searchProduct)("resultTemplate",r)("inputFormatter",n.productFormatter),s.zb(2),s.oc("placeholder","Quantity ",e+1,""),s.zb(2),s.oc("placeholder","Purchase_price ",e+1,""),s.zb(3),s.Kc(n.parent.value.items[e].quantity*n.parent.value.items[e].purchase_price)}}let G=(()=>{class e{constructor(e,t){this.productService=e,this.fb=t,this.removeItem=new s.n,this.searching=!1,this.searchFailed=!1,this.total=0,this.searchProduct=e=>e.pipe(w(300),Object(x.a)(),Object(N.a)(()=>this.searching=!0),Object(M.a)(e=>this.productService.search(e).pipe(Object(N.a)(e=>{this.searchFailed=!1}),Object(_.a)(()=>(this.searchFailed=!0,Object(J.a)([]))))),Object(N.a)(()=>this.searching=!1)),this.productFormatter=e=>{if(e)return`${e.name} [S: ${e.size}] [P: ${e.price}]`}}ngOnInit(){}getProductName(e){if(e)return`${e.name} [S: ${e.size}] [P: ${e.price}]`}onRemoveItem(e){this.removeItem.emit(e)}updateTotal(){const e=this.parent.get("items");let t=0;for(let n=0;n<e.length;n++)t+=e.value[n].quantity*e.value[n].purchase_price;this.total=t}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(q.a),s.Mb(z.d))},e.\u0275cmp=s.Gb({type:e,selectors:[["inventory-item-form"]],inputs:{parent:"parent"},outputs:{removeItem:"removeItem"},decls:13,vars:3,consts:[["rt",""],[3,"formGroup"],["formArrayName","items"],[4,"ngFor","ngForOf"],[1,"row"],[1,"offset-md-7","col-md-1"],[1,"form-group","col-1","pl-0","pr-1","text-right"],[1,"form-control","text-right"],[3,"result","term"],[3,"formGroupName"],[1,"form-row"],[1,"col-1"],[1,"form-group","col-md-3"],["id","product","type","text","formControlName","product","placeholder","Product name or serial number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],[1,"form-group","col-2"],["formControlName","quantity","id","quantity",1,"form-control",3,"placeholder"],["formControlName","purchase_price","id","purchase_price",1,"form-control",3,"placeholder","change"],[1,"form-group","col-1"],[1,"form-group","col-auto"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(e,t){1&e&&(s.Hc(0,A,1,2,"ng-template",null,0,s.Ic),s.Rb(2,"div",1),s.Rb(3,"div",2),s.Hc(4,H,17,10,"div",3),s.Rb(5,"div",4),s.Rb(6,"div",5),s.Rb(7,"strong"),s.Jc(8," Total"),s.Qb(),s.Qb(),s.Rb(9,"div",6),s.Rb(10,"label",7),s.Rb(11,"strong"),s.Jc(12),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(2),s.mc("formGroup",t.parent),s.zb(2),s.mc("ngForOf",t.parent.controls.items.controls),s.zb(8),s.Kc(t.total))},directives:[z.n,z.g,z.c,u.n,h.a,z.h,z.b,h.f,z.m,z.f],styles:[""]}),e})();function K(e,t){if(1&e&&s.Nb(0,"ngb-highlight",28),2&e){const e=t.term;s.mc("result",t.result.name)("term",e)}}function D(e,t){1&e&&(s.Rb(0,"small",29),s.Jc(1," Reference required "),s.Qb())}const L=function(e,t,n){return{disabled:e,"btn-warning":t,"btn-success":n}};let U=(()=>{class e{constructor(e,t,n){this.fb=e,this.storehouseService=t,this.userService=n,this.create=new s.n,this.exists=!1,this.mouseoverShifting=!1,this.searching=!1,this.searchFailed=!1,this.searchStorehouse=e=>e.pipe(w(300),Object(x.a)(),Object(N.a)(()=>this.searching=!0),Object(M.a)(e=>this.storehouseService.search(e).pipe(Object(N.a)(e=>{this.searchFailed=!1}),Object(_.a)(()=>(this.searchFailed=!0,Object(J.a)([]))))),Object(N.a)(()=>this.searching=!1)),this.searchUser=e=>e.pipe(w(300),Object(x.a)(),Object(N.a)(()=>this.searching=!0),Object(M.a)(e=>this.userService.search(e).pipe(Object(N.a)(e=>{this.searchFailed=!1}),Object(_.a)(()=>(this.searchFailed=!0,Object(J.a)([]))))),Object(N.a)(()=>this.searching=!1)),this.storehouseFormatter=e=>{if(e)return`${e.name} [${e.storekeeper_number}]`},this.userFormatter=e=>{if(e)return`${e.name} [${e.phone}]`},this.createForm()}ngOnChanges(e){}createForm(){this.form=this.fb.group({inventoryType:["",z.u.required],reference:["",z.u.required],storehouse:["",z.u.required],supplier:["",z.u.required],items:this.fb.array([this.createInventoryItem()])})}pushInventoryItem(){this.form.get("items").push(this.createInventoryItem())}createInventoryItem(){return this.fb.group({product:["",z.u.required],quantity:["",z.u.required],purchase_price:["",z.u.required]})}onRemoveInventoryItem(e){this.form.get("items").removeAt(e)}submit(){this.form.valid&&this.create.emit(this.form.value)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(z.d),s.Mb(c.a),s.Mb(j.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["inventory-form"]],inputs:{inventory:"inventory"},outputs:{create:"create"},features:[s.xb],decls:45,vars:19,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["type","button","routerLink","/dashboard/inventory",1,"btn","btn-success","btn-sm"],[1,"fa","fa-list"],["rt",""],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"col-md-6","mb-3"],["for","reference"],["type","text","id","reference","formControlName","reference","placeholder","Inventory Number ",1,"form-control"],["class","text-danger",4,"ngIf"],["for","inventoryType"],["id","inventoryType","formControlName","inventoryType",1,"form-control"],["value","","selected",""],["value","in"],["value","transfer"],["value","sample"],["value","damage"],["for","storehouse"],["id","storehouse","type","text","formControlName","storehouse","placeholder","Shop name or owner number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],["for","supplier"],["id","supplier","type","text","formControlName","supplier","placeholder","Supplier name or phone number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],[1,"row"],[1,"col-md-12"],[3,"parent","removeItem"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"ngClass"],[3,"result","term"],[1,"text-danger"]],template:function(e,t){if(1&e&&(s.Rb(0,"nav",0),s.Rb(1,"a",1),s.Jc(2,"Inventory Form"),s.Qb(),s.Rb(3,"a",2),s.Nb(4,"i",3),s.Jc(5," INVENTORY LIST "),s.Qb(),s.Qb(),s.Hc(6,K,1,2,"ng-template",null,4,s.Ic),s.Rb(8,"form",5),s.dc("ngSubmit",(function(){return t.submit()})),s.Rb(9,"div",6),s.Rb(10,"div",7),s.Rb(11,"label",8),s.Jc(12,"Inventory Number* "),s.Qb(),s.Nb(13,"input",9),s.Hc(14,D,2,0,"small",10),s.Qb(),s.Rb(15,"div",7),s.Rb(16,"label",11),s.Jc(17,"Inventory Type *"),s.Qb(),s.Rb(18,"select",12),s.Rb(19,"option",13),s.Jc(20," N/A "),s.Qb(),s.Rb(21,"option",14),s.Jc(22," In "),s.Qb(),s.Rb(23,"option",15),s.Jc(24," Transfer "),s.Qb(),s.Rb(25,"option",16),s.Jc(26," Sample "),s.Qb(),s.Rb(27,"option",17),s.Jc(28," Damage "),s.Qb(),s.Qb(),s.Qb(),s.Rb(29,"div",7),s.Rb(30,"label",18),s.Jc(31,"Storehouse"),s.Qb(),s.Nb(32,"input",19),s.Qb(),s.Rb(33,"div",7),s.Rb(34,"label",20),s.Jc(35,"Supplier"),s.Qb(),s.Nb(36,"input",21),s.Qb(),s.Qb(),s.Rb(37,"div",22),s.Rb(38,"div",23),s.Rb(39,"inventory-item-form",24),s.dc("removeItem",(function(e){return t.onRemoveInventoryItem(e)})),s.Qb(),s.Qb(),s.Rb(40,"button",25),s.dc("click",(function(){return t.pushInventoryItem()})),s.Jc(41," Add Inventory Item "),s.Qb(),s.Qb(),s.Rb(42,"div",26),s.Rb(43,"button",27),s.Jc(44),s.Qb(),s.Qb(),s.Qb()),2&e){const e=s.wc(7);s.zb(8),s.mc("formGroup",t.form),s.zb(6),s.mc("ngIf",t.form.controls.reference.errors&&t.form.controls.reference.touched),s.zb(18),s.Eb("is-invalid",t.searchFailed),s.mc("ngbTypeahead",t.searchStorehouse)("resultTemplate",e)("inputFormatter",t.storehouseFormatter),s.zb(4),s.Eb("is-invalid",t.searchFailed),s.mc("ngbTypeahead",t.searchUser)("resultTemplate",e)("inputFormatter",t.userFormatter),s.zb(3),s.mc("parent",t.form),s.zb(4),s.mc("ngClass",s.sc(15,L,t.form.invalid,t.exists,!t.exists)),s.zb(1),s.Lc(" ",t.exists?"Update":"Create"," ")}},directives:[h.d,r.d,z.w,z.n,z.g,z.b,z.m,z.f,u.o,z.t,z.q,z.v,h.f,G,u.m,h.a],styles:[""]}),e})();var $=n("HF3I");function B(e,t){1&e&&s.Nb(0,"loading")}function E(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",8),s.Rb(1,"strong"),s.Jc(2,"Success! "),s.Qb(),s.Jc(3),s.Rb(4,"button",9),s.dc("click",(function(){return s.zc(e),s.fc().onClose()})),s.Rb(5,"span",10),s.Jc(6,"\xd7"),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(3),s.Lc(" ",e.message," ")}}function V(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",11),s.Rb(1,"strong"),s.Jc(2,"Failed! "),s.Qb(),s.Jc(3),s.Rb(4,"button",9),s.dc("click",(function(){return s.zc(e),s.fc().onClose()})),s.Rb(5,"span",10),s.Jc(6,"\xd7"),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(3),s.Lc(" ",e.errorMessage," ")}}let X=(()=>{class e{constructor(e){this.inventoryService=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){}onCreateInventory(e){return Object(i.a)(this,void 0,void 0,(function*(){this.loading=!0,this.errorMessage="",this.message="";try{yield this.inventoryService.create(e).toPromise(),this.message="Inventory added"}catch(t){this.errorMessage=t}this.loading=!1}))}onClose(){this.loading=!1,this.errorMessage="",this.message=""}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(b))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-add"]],decls:10,vars:3,consts:[[1,"container-fluid","component-head"],[1,"container-fluid"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"create"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Add Inventory"),s.Qb(),s.Qb(),s.Rb(3,"div",1),s.Hc(4,B,1,0,"loading",2),s.Hc(5,E,7,1,"div",3),s.Hc(6,V,7,1,"div",4),s.Rb(7,"div",5),s.Rb(8,"div",6),s.Rb(9,"inventory-form",7),s.dc("create",(function(e){return t.onCreateInventory(e)})),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(4),s.mc("ngIf",t.loading),s.zb(1),s.mc("ngIf",t.message.length>0),s.zb(1),s.mc("ngIf",t.errorMessage.length>0))},directives:[u.o,U,$.a],styles:[""]}),e})();var Y=n("KKTG");function Z(e,t){if(1&e&&(s.Rb(0,"tr"),s.Rb(1,"td"),s.Jc(2),s.Qb(),s.Rb(3,"td"),s.Jc(4),s.Qb(),s.Rb(5,"td"),s.Jc(6),s.Qb(),s.Rb(7,"td"),s.Jc(8),s.Qb(),s.Qb()),2&e){const e=t.$implicit;s.zb(2),s.Kc(e.product.name),s.zb(2),s.Kc(e.product.size),s.zb(2),s.Kc(e.quantity),s.zb(2),s.Kc(e.purchase_price)}}let W=(()=>{class e{constructor(){this.details=new s.n}onDetails(e){this.details.emit(e)}onPrint(){window.print()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["product-stock-list"]],inputs:{productStockPage:"productStockPage",name:"name"},outputs:{details:"details"},decls:21,vars:2,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],[1,"btn","btn-sm","btn-primary","mx-1",3,"click"],[1,"fa","fa-print"],[1,"table","table-hover","table-bordered","table-responsive-sm"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s.Rb(0,"nav",0),s.Rb(1,"a",1),s.Jc(2,"Stock List of "),s.Rb(3,"strong"),s.Jc(4),s.Qb(),s.Qb(),s.Rb(5,"button",2),s.dc("click",(function(){return t.onPrint()})),s.Nb(6,"i",3),s.Jc(7," Print"),s.Qb(),s.Qb(),s.Rb(8,"table",4),s.Rb(9,"thead"),s.Rb(10,"tr"),s.Rb(11,"th"),s.Jc(12,"Product"),s.Qb(),s.Rb(13,"th"),s.Jc(14,"Size"),s.Qb(),s.Rb(15,"th"),s.Jc(16,"Quantity"),s.Qb(),s.Rb(17,"th"),s.Jc(18,"Purchase price"),s.Qb(),s.Qb(),s.Qb(),s.Rb(19,"tbody"),s.Hc(20,Z,9,4,"tr",5),s.Qb(),s.Qb()),2&e&&(s.zb(4),s.Kc(t.name),s.zb(16),s.mc("ngForOf",t.productStockPage.docs))},directives:[h.d,u.n],styles:[""],changeDetection:0}),e})();function ee(e,t){if(1&e){const e=s.Sb();s.Rb(0,"li",10),s.dc("click",(function(){s.zc(e);const n=t.$implicit;return s.fc(2).onSelectStorehouse(n._id)})),s.Jc(1),s.Qb()}if(2&e){const e=t.$implicit;s.zb(1),s.Mc(" ",e.name,"[",e.storekeeper_number,"]")}}function te(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",5),s.Rb(1,"ul",6),s.Rb(2,"li",7),s.Jc(3,"Please select a "),s.Rb(4,"strong"),s.Jc(5," Storehouse from List "),s.Qb(),s.Qb(),s.Hc(6,ee,2,2,"li",8),s.Qb(),s.Rb(7,"pagination",9),s.dc("paginate",(function(t){return s.zc(e),s.fc().onChangeStorehousePage(t)})),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(6),s.mc("ngForOf",e.storehousePage.docs),s.zb(1),s.mc("page",e.storehousePage)("small",!0)}}function ne(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",11),s.Rb(1,"product-stock-list",12),s.dc("details",(function(t){return s.zc(e),s.fc().onDetails(t)})),s.Qb(),s.Rb(2,"pagination",9),s.dc("paginate",(function(t){s.zc(e);const n=s.fc();return n.onChangeProductStockPage(null==n.storehouse?null:n.storehouse._id,t)})),s.Qb(),s.Rb(3,"button",13),s.dc("click",(function(){return s.zc(e),s.fc().onClose("list")})),s.Jc(4,"Close"),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(1),s.mc("name",e.storehouse.name)("productStockPage",e.productStockPage),s.zb(1),s.mc("page",e.productStockPage)("small",!1)}}let re=(()=>{class e{constructor(e,t){this.storehouseService=e,this.productStockService=t,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){this.getAllStorehouse()}getAllStorehouse(e=1,t=8,n="priority",r="asc"){return Object(i.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this.storehousePage=yield this.storehouseService.getAll(e,t,n,r).toPromise()}catch(o){this.errorMessage=o}this.loading=!1}))}onChangeStorehousePage(e){this.getAllStorehouse(e.pageNumber,e.limit,e.sort,e.order)}onSelectStorehouse(e){const t=this.storehousePage.docs.find(t=>t._id==e);this.storehouse=Object.assign({},t),this.getProductStockbyStorehouseId(e)}getProductStockbyStorehouseId(e,t=1,n=8,r="priority",o="asc"){return Object(i.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this.productStockPage=yield this.productStockService.getProductStockByStorehouseId(e).toPromise()}catch(t){this.errorMessage=t}this.loading=!1}))}onChangeProductStockPage(e,t){this.getProductStockbyStorehouseId(e,t.pageNumber,t.limit,t.sort,t.order)}onDetails(e){}onClose(e){switch(e){case"details":this.productStock=null;break;case"list":this.productStockPage=null,this.storehouse=null}}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(c.a),s.Mb(Y.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-stocks"]],decls:7,vars:2,consts:[[1,"container-fluid","component-head"],[1,"container"],[1,"row"],["class","col-md-3 d-print-none",4,"ngIf"],["class","col-12 col-md-9 bg-white pb-3",4,"ngIf"],[1,"col-md-3","d-print-none"],[1,"list-group","mb-1"],[1,"list-group-item","disabled"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[3,"page","small","paginate"],[1,"list-group-item",3,"click"],[1,"col-12","col-md-9","bg-white","pb-3"],[3,"name","productStockPage","details"],[1,"btn","btn-sm","btn-danger","d-print-none",3,"click"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Stocks"),s.Qb(),s.Qb(),s.Rb(3,"div",1),s.Rb(4,"div",2),s.Hc(5,te,8,3,"div",3),s.Hc(6,ne,5,4,"div",4),s.Qb(),s.Qb()),2&e&&(s.zb(5),s.mc("ngIf",null==t.storehousePage||null==t.storehousePage.docs?null:t.storehousePage.docs.length),s.zb(1),s.mc("ngIf",(null==t.productStockPage||null==t.productStockPage.docs?null:t.productStockPage.docs.length)&&!t.productStock))},directives:[u.o,u.n,d.a,W],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}"]}),e})();function oe(e,t){if(1&e&&s.Nb(0,"ngb-highlight",24),2&e){const e=t.term;s.mc("result",t.result.name)("term",e)}}function ie(e,t){1&e&&(s.Rb(0,"small",25),s.Jc(1," Reference required "),s.Qb())}const se=function(e){return{disabled:e}};let ce=(()=>{class e{constructor(e,t){this.fb=e,this.storehouseService=t,this.create=new s.n,this.mouseoverShifting=!1,this.searching=!1,this.searchFailed=!1,this.searchStorehouse=e=>e.pipe(w(300),Object(x.a)(),Object(N.a)(()=>this.searching=!0),Object(M.a)(e=>this.storehouseService.search(e).pipe(Object(N.a)(e=>{this.searchFailed=!1}),Object(_.a)(()=>(this.searchFailed=!0,Object(J.a)([]))))),Object(N.a)(()=>this.searching=!1)),this.storehouseFormatter=e=>{if(e)return`${e.name} [${e.storekeeper_number}]`},this.createForm()}ngOnInit(){}createForm(){this.form=this.fb.group({inventoryType:["transfer",z.u.required],reference:["",z.u.required],from:["",z.u.required],storehouse:["",z.u.required],items:this.fb.array([this.createInventoryItem()])})}pushInventoryItem(){this.form.get("items").push(this.createInventoryItem())}createInventoryItem(){return this.fb.group({product:["",z.u.required],quantity:["",z.u.required],purchase_price:["",z.u.required]})}onRemoveInventoryItem(e){this.form.get("items").removeAt(e)}submit(){this.form.valid&&this.create.emit(this.form.value)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(z.d),s.Mb(c.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["inventory-transfer-form"]],outputs:{create:"create"},decls:37,vars:16,consts:[[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["type","button","routerLink","/dashboard/inventory",1,"btn","btn-success","btn-sm"],[1,"fa","fa-list"],["rt",""],[1,"my-3","p-4","shifting-form","label1","text-left",3,"formGroup","ngSubmit"],[1,"form-row"],[1,"col-md-6","mb-3"],["for","reference"],["type","text","id","reference","formControlName","reference","placeholder","Inventory Number ",1,"form-control"],["class","text-danger",4,"ngIf"],["for","inventoryType"],["id","inventoryType","formControlName","inventoryType",1,"form-control"],["value","transfer"],["for","source_storehouse"],["id","source_storehouse","type","text","formControlName","from","placeholder","From Storehouse name or owner number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],["for","storehouse"],["id","storehouse","type","text","formControlName","storehouse","placeholder","To Storehouse name or owner number",1,"form-control",3,"ngbTypeahead","resultTemplate","inputFormatter"],[1,"row"],[1,"col-md-12"],[3,"parent","removeItem"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary",3,"ngClass"],[3,"result","term"],[1,"text-danger"]],template:function(e,t){if(1&e&&(s.Rb(0,"nav",0),s.Rb(1,"a",1),s.Jc(2,"Inventory Transfer form"),s.Qb(),s.Rb(3,"a",2),s.Nb(4,"i",3),s.Jc(5," INVENTORY LIST "),s.Qb(),s.Qb(),s.Hc(6,oe,1,2,"ng-template",null,4,s.Ic),s.Rb(8,"form",5),s.dc("ngSubmit",(function(){return t.submit()})),s.Rb(9,"div",6),s.Rb(10,"div",7),s.Rb(11,"label",8),s.Jc(12,"Inventory Number* "),s.Qb(),s.Nb(13,"input",9),s.Hc(14,ie,2,0,"small",10),s.Qb(),s.Rb(15,"div",7),s.Rb(16,"label",11),s.Jc(17,"Inventory Type *"),s.Qb(),s.Rb(18,"select",12),s.Rb(19,"option",13),s.Jc(20," Transfer "),s.Qb(),s.Qb(),s.Qb(),s.Rb(21,"div",7),s.Rb(22,"label",14),s.Jc(23,"Source Storehouse*"),s.Qb(),s.Nb(24,"input",15),s.Qb(),s.Rb(25,"div",7),s.Rb(26,"label",16),s.Jc(27,"Destination Storehouse*"),s.Qb(),s.Nb(28,"input",17),s.Qb(),s.Qb(),s.Rb(29,"div",18),s.Rb(30,"div",19),s.Rb(31,"inventory-item-form",20),s.dc("removeItem",(function(e){return t.onRemoveInventoryItem(e)})),s.Qb(),s.Qb(),s.Rb(32,"button",21),s.dc("click",(function(){return t.pushInventoryItem()})),s.Jc(33," Add Inventory Item "),s.Qb(),s.Qb(),s.Rb(34,"div",22),s.Rb(35,"button",23),s.Jc(36," Transfer "),s.Qb(),s.Qb(),s.Qb()),2&e){const e=s.wc(7);s.zb(8),s.mc("formGroup",t.form),s.zb(6),s.mc("ngIf",t.form.controls.reference.errors&&t.form.controls.reference.touched),s.zb(10),s.Eb("is-invalid",t.searchFailed),s.mc("ngbTypeahead",t.searchStorehouse)("resultTemplate",e)("inputFormatter",t.storehouseFormatter),s.zb(4),s.Eb("is-invalid",t.searchFailed),s.mc("ngbTypeahead",t.searchStorehouse)("resultTemplate",e)("inputFormatter",t.storehouseFormatter),s.zb(3),s.mc("parent",t.form),s.zb(4),s.mc("ngClass",s.qc(14,se,t.form.invalid))}},directives:[h.d,r.d,z.w,z.n,z.g,z.b,z.m,z.f,u.o,z.t,z.q,z.v,h.f,G,u.m,h.a],styles:[""]}),e})();function ae(e,t){1&e&&s.Nb(0,"loading")}function le(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",8),s.Rb(1,"strong"),s.Jc(2,"Success! "),s.Qb(),s.Jc(3),s.Rb(4,"button",9),s.dc("click",(function(){return s.zc(e),s.fc().onClose()})),s.Rb(5,"span",10),s.Jc(6,"\xd7"),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(3),s.Lc(" ",e.message," ")}}function be(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",11),s.Rb(1,"strong"),s.Jc(2,"Failed! "),s.Qb(),s.Jc(3),s.Rb(4,"button",9),s.dc("click",(function(){return s.zc(e),s.fc().onClose()})),s.Rb(5,"span",10),s.Jc(6,"\xd7"),s.Qb(),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(3),s.Lc(" ",e.errorMessage," ")}}let ue=(()=>{class e{constructor(e){this.inventoryService=e,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){}onCreateInventory(e){return Object(i.a)(this,void 0,void 0,(function*(){console.log(e),this.loading=!0,this.errorMessage="",this.message="";try{yield this.inventoryService.transfer(e).toPromise(),this.message="Inventory added"}catch(t){this.errorMessage=t}this.loading=!1}))}onClose(){this.loading=!1,this.errorMessage="",this.message=""}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(b))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-transfer"]],decls:10,vars:3,consts:[[1,"container-fluid","component-head"],[1,"container-fluid"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],[1,"row"],[1,"col-12"],[3,"create"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Inventory Transfer"),s.Qb(),s.Qb(),s.Rb(3,"div",1),s.Hc(4,ae,1,0,"loading",2),s.Hc(5,le,7,1,"div",3),s.Hc(6,be,7,1,"div",4),s.Rb(7,"div",5),s.Rb(8,"div",6),s.Rb(9,"inventory-transfer-form",7),s.dc("create",(function(e){return t.onCreateInventory(e)})),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(4),s.mc("ngIf",t.loading),s.zb(1),s.mc("ngIf",t.message.length>0),s.zb(1),s.mc("ngIf",t.errorMessage.length>0))},directives:[u.o,ce,$.a],styles:[""]}),e})(),de=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["app-convert"]],decls:3,vars:0,consts:[[1,"container-fluid","component-head"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Inventory Convert"),s.Qb(),s.Qb())},styles:[""]}),e})();function he(e,t){if(1&e){const e=s.Sb();s.Rb(0,"li",13),s.dc("click",(function(){s.zc(e);const n=t.$implicit;return s.fc(2).onSelectStorehouse(n._id)})),s.Jc(1),s.Qb()}if(2&e){const e=t.$implicit;s.zb(1),s.Mc(" ",e.name,"[",e.storekeeper_number,"]")}}function me(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",8),s.Rb(1,"ul",9),s.Rb(2,"li",10),s.Jc(3,"Please select a "),s.Rb(4,"strong"),s.Jc(5," Storehouse from List "),s.Qb(),s.Qb(),s.Hc(6,he,2,2,"li",11),s.Qb(),s.Rb(7,"pagination",12),s.dc("paginate",(function(t){return s.zc(e),s.fc().onChangeStorehousePage(t)})),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(6),s.mc("ngForOf",e.storehousePage.docs),s.zb(1),s.mc("page",e.storehousePage)("small",!0)}}function pe(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",14),s.Rb(1,"inventory-list",15),s.dc("details",(function(t){return s.zc(e),s.fc().onDetails(t)})),s.Qb(),s.Rb(2,"pagination",12),s.dc("paginate",(function(t){s.zc(e);const n=s.fc();return n.onChangeInventoryPage(null==n.storehouse?null:n.storehouse._id,t)})),s.Qb(),s.Rb(3,"button",16),s.dc("click",(function(){return s.zc(e),s.fc().onClose("list")})),s.Jc(4,"Close"),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(1),s.mc("inventoryPage",e.inventoryPage),s.zb(1),s.mc("page",e.inventoryPage)("small",!0)}}function fe(e,t){if(1&e){const e=s.Sb();s.Rb(0,"div",17),s.Nb(1,"inventory-details",18),s.Rb(2,"button",19),s.dc("click",(function(){return s.zc(e),s.fc().onClose("details")})),s.Jc(3,"Close"),s.Qb(),s.Rb(4,"button",20),s.dc("click",(function(){s.zc(e);const t=s.fc();return t.onApprove(t.inventory._id)})),s.Jc(5,"Approve"),s.Qb(),s.Qb()}if(2&e){const e=s.fc();s.zb(1),s.mc("inventory",e.inventory)}}function ge(e,t){1&e&&s.Nb(0,"loading")}const ve=[{path:"",component:P},{path:"add",component:X},{path:"add/:id",component:X},{path:"stocks",component:re},{path:"transfer",component:ue},{path:"receive",component:(()=>{class e{constructor(e,t){this.storehouseService=e,this.inventoryService=t,this.loading=!1,this.message="",this.errorMessage=""}ngOnInit(){this.getAllStorehouse()}getAllStorehouse(e=1,t=8,n="priority",r="asc"){return Object(i.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this.storehousePage=yield this.storehouseService.getAll(e,t,n,r).toPromise()}catch(o){this.errorMessage=o}this.loading=!1}))}onChangeStorehousePage(e){this.getAllStorehouse(e.pageNumber,e.limit,e.sort,e.order)}onSelectStorehouse(e){const t=this.storehousePage.docs.find(t=>t._id==e);this.storehouse=Object.assign({},t),this.getAllUnapprovedInventories(e)}getAllUnapprovedInventories(e,t=1,n=8,r="priority",o="asc"){return Object(i.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this.inventoryPage=yield this.inventoryService.getUnapprovedInventories(e,t,n,r,o).toPromise()}catch(i){this.errorMessage=i}this.loading=!1}))}onChangeInventoryPage(e,t){this.getAllUnapprovedInventories(e,t.pageNumber,t.limit,t.sort,t.order)}onDetails(e){const t=this.inventoryPage.docs.find(t=>t._id==e);this.inventory=Object.assign({},t)}onClose(e){switch(e){case"details":this.inventory=null;break;case"list":this.inventoryPage=null,this.storehouse=null}}onApprove(e){return Object(i.a)(this,void 0,void 0,(function*(){this.loading=!0;try{yield this.inventoryService.approveTransferedInventories(e).toPromise(),this.onClose("details"),this.getAllUnapprovedInventories(this.storehouse._id)}catch(t){this.errorMessage=t}this.loading=!1}))}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(c.a),s.Mb(b))},e.\u0275cmp=s.Gb({type:e,selectors:[["app-receive"]],decls:10,vars:4,consts:[[1,"container-fluid","component-head"],[1,"container"],[1,"row"],["class","col-md-3 d-print-none",4,"ngIf"],["class","col-12 bg-white pb-3",4,"ngIf"],["class","col-12 bg-white px-0 pb-3",4,"ngIf"],[1,"col-9"],[4,"ngIf"],[1,"col-md-3","d-print-none"],[1,"list-group","mb-1"],[1,"list-group-item","disabled"],["class","list-group-item",3,"click",4,"ngFor","ngForOf"],[3,"page","small","paginate"],[1,"list-group-item",3,"click"],[1,"col-12","bg-white","pb-3"],[3,"inventoryPage","details"],[1,"btn","btn-sm","btn-danger","d-print-none",3,"click"],[1,"col-12","bg-white","px-0","pb-3"],[3,"inventory"],[1,"btn","btn-sm","btn-danger","d-print-none","mx-1",3,"click"],[1,"btn","btn-sm","btn-success","d-print-none","mx-1",3,"click"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"h3"),s.Jc(2,"Receive Inventory"),s.Qb(),s.Qb(),s.Rb(3,"div",1),s.Rb(4,"div",2),s.Hc(5,me,8,3,"div",3),s.Hc(6,pe,5,3,"div",4),s.Hc(7,fe,6,1,"div",5),s.Rb(8,"div",6),s.Hc(9,ge,1,0,"loading",7),s.Qb(),s.Qb(),s.Qb()),2&e&&(s.zb(5),s.mc("ngIf",(null==t.storehousePage||null==t.storehousePage.docs?null:t.storehousePage.docs.length)&&!(null!=t.inventoryPage&&null!=t.inventoryPage.docs&&t.inventoryPage.docs.length)),s.zb(1),s.mc("ngIf",(null==t.inventoryPage||null==t.inventoryPage.docs?null:t.inventoryPage.docs.length)&&!t.inventory),s.zb(1),s.mc("ngIf",t.inventory),s.zb(2),s.mc("ngIf",t.loading))},directives:[u.o,u.n,d.a,p,y,$.a],styles:["[_nghost-%COMP%]{font-size:14px;font-family:Montserrat,sans-serif;display:block;position:relative;min-height:calc(100% - 57px);background-color:#f2f4f5}.list-group-item[_ngcontent-%COMP%]{padding:9px 24px}.list-group-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#ffc247}"]}),e})()},{path:"convert",component:de}];let ye=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[o.a,r.e.forChild(ve)]]}),e})()}}]);