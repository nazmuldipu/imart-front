(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"4rUa":function(t,e,i){"use strict";i.r(e),i.d(e,"ROUTES",(function(){return Rt})),i.d(e,"ProductsModule",(function(){return Qt}));var r=i("mrSG"),o=i("fXoL"),c=i("cu3B"),n=i("/e7+"),s=i("ofXK"),b=i("HF3I"),a=i("1kSV"),l=i("3Pt+");function d(t,e){if(1&t&&(o.Rb(0,"small",15),o.Rb(1,"div",16),o.Fc(2," Name required "),o.Qb(),o.Rb(3,"div",16),o.Fc(4," Minimum Length should be 3 "),o.Qb(),o.Qb()),2&t){const t=o.fc();o.zb(1),o.ic("hidden",!t.form.controls.name.errors.required),o.zb(2),o.ic("hidden",!t.form.controls.name.errors.minlength)}}function u(t,e){if(1&t&&(o.Rb(0,"small",15),o.Rb(1,"div",16),o.Fc(2," Priority required "),o.Qb(),o.Rb(3,"div",16),o.Fc(4," Minimum value should be 0 "),o.Qb(),o.Qb()),2&t){const t=o.fc();o.zb(1),o.ic("hidden",!t.form.controls.priority.errors.required),o.zb(2),o.ic("hidden",!t.form.controls.priority.errors.min)}}const h=function(t,e,i){return{disabled:t,"btn-warning":e,"btn-success":i}};let m=(()=>{class t{constructor(t){this.fb=t,this.create=new o.n,this.update=new o.n,this.cancel=new o.n,this.exists=!1,this.createForm()}ngOnChanges(t){if(this.brand&&this.brand._id){this.exists=!0;const t=Object.assign({},this.brand);this.form.patchValue(t)}}createForm(){this.form=this.fb.group({name:["",[l.q.required,l.q.minLength(3)]],priority:[0,[l.q.required,l.q.min(0)]],image:[null]})}uploadFile(t){this.form.patchValue({image:t.target.files[0]}),this.form.get("image").updateValueAndValidity()}submit(){this.form.valid&&(this.exists?this.update.emit(this.form.value):this.create.emit(this.form.value),this.exists=!1,this.form.reset())}onCancel(){this.cancel.emit(!0)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(l.c))},t.\u0275cmp=o.Gb({type:t,selectors:[["brand-form"]],inputs:{brand:"brand"},outputs:{create:"create",update:"update",cancel:"cancel"},features:[o.xb],decls:26,vars:10,consts:[[1,"navbar","navbar-light","bg-light","border","border-bottom-0"],[1,"navbar-brand"],[1,"p-3","border",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","name","id","name","formControlName","name","placeholder","Brand name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","priority",1,"col-sm-2","col-form-label"],["type","priority","id","priority","formControlName","priority","placeholder","Priority",1,"form-control"],["for","image",1,"col-sm-2","col-form-label"],["type","file","id","image",1,"form-control",3,"change"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"btn","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"]],template:function(t,e){1&t&&(o.Rb(0,"nav",0),o.Rb(1,"a",1),o.Fc(2),o.Qb(),o.Qb(),o.Rb(3,"form",2),o.dc("ngSubmit",(function(){return e.submit()})),o.Rb(4,"div",3),o.Rb(5,"label",4),o.Fc(6,"Name"),o.Qb(),o.Rb(7,"div",5),o.Nb(8,"input",6),o.Dc(9,d,5,2,"small",7),o.Qb(),o.Qb(),o.Rb(10,"div",3),o.Rb(11,"label",8),o.Fc(12,"Priority"),o.Qb(),o.Rb(13,"div",5),o.Nb(14,"input",9),o.Dc(15,u,5,2,"small",7),o.Qb(),o.Qb(),o.Rb(16,"div",3),o.Rb(17,"label",10),o.Fc(18,"Image"),o.Qb(),o.Rb(19,"div",5),o.Rb(20,"input",11),o.dc("change",(function(t){return e.uploadFile(t)})),o.Qb(),o.Qb(),o.Qb(),o.Rb(21,"div",12),o.Rb(22,"button",13),o.Fc(23),o.Qb(),o.Rb(24,"button",14),o.dc("click",(function(){return e.onCancel()})),o.Fc(25,"Cancel"),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.zb(2),o.Hc("",e.exists?"Update":"Add"," Brand"),o.zb(1),o.ic("formGroup",e.form),o.zb(6),o.ic("ngIf",e.form.controls.name.errors&&e.form.controls.name.touched),o.zb(6),o.ic("ngIf",e.form.controls.priority.errors&&e.form.controls.priority.touched),o.zb(7),o.ic("ngClass",o.oc(6,h,e.form.invalid,e.exists,!e.exists)),o.zb(1),o.Hc(" ",e.exists?"Update":"Create"," "))},directives:[a.b,l.s,l.k,l.e,l.b,l.j,l.d,s.k,s.i],styles:[""]}),t})();function f(t,e){1&t&&o.Nb(0,"loading")}function g(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",6),o.Rb(1,"strong"),o.Fc(2,"Success! "),o.Qb(),o.Fc(3),o.Rb(4,"button",7),o.dc("click",(function(){return o.vc(t),o.fc().onClose()})),o.Rb(5,"span",8),o.Fc(6,"\xd7"),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.fc();o.zb(3),o.Hc(" ",t.message," ")}}function p(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",9),o.Rb(1,"strong"),o.Fc(2,"Failed! "),o.Qb(),o.Fc(3),o.Rb(4,"button",7),o.dc("click",(function(){return o.vc(t),o.fc().onClose()})),o.Rb(5,"span",8),o.Fc(6,"\xd7"),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.fc();o.zb(3),o.Hc(" ",t.errorMessage," ")}}function v(t,e){if(1&t){const t=o.Sb();o.Rb(0,"tr"),o.Rb(1,"td"),o.Nb(2,"img",23),o.Qb(),o.Rb(3,"td"),o.Fc(4),o.Qb(),o.Rb(5,"td",20),o.Fc(6),o.Qb(),o.Rb(7,"td",21),o.Rb(8,"button",24),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(4).onEdit(i._id)})),o.Nb(9,"i",25),o.Qb(),o.Rb(10,"button",26),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(4).onDelete(i._id)})),o.Nb(11,"i",27),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit,i=o.fc(4);o.zb(2),o.ic("src",i.imageUrl+t._id,o.yc)("alt",t.name+" image"),o.zb(2),o.Gc(t.name),o.zb(2),o.Gc(t.priority)}}function R(t,e){if(1&t&&(o.Rb(0,"tbody"),o.Dc(1,v,12,4,"tr",22),o.Qb()),2&t){const t=o.fc(3);o.zb(1),o.ic("ngForOf",t.brands)}}function Q(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",12),o.Rb(1,"nav",13),o.Rb(2,"a",14),o.Fc(3,"Brand List"),o.Qb(),o.Rb(4,"button",15),o.dc("click",(function(){return o.vc(t),o.fc(2).onShowBrandForm()})),o.Fc(5," + ADD BRAND "),o.Qb(),o.Qb(),o.Rb(6,"div",16),o.Rb(7,"form",17),o.Nb(8,"input",18),o.Qb(),o.Rb(9,"table",19),o.Rb(10,"thead"),o.Rb(11,"tr"),o.Rb(12,"th"),o.Fc(13,"Image"),o.Qb(),o.Rb(14,"th"),o.Fc(15,"Name"),o.Qb(),o.Rb(16,"th",20),o.Fc(17,"Priority"),o.Qb(),o.Rb(18,"th",21),o.Fc(19,"Actions"),o.Qb(),o.Qb(),o.Qb(),o.Dc(20,R,2,1,"tbody",2),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.fc(2);o.zb(20),o.ic("ngIf",t.brands.length>0)}}function y(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",12),o.Rb(1,"brand-form",28),o.dc("create",(function(e){return o.vc(t),o.fc(2).onCreate(e)}))("update",(function(e){return o.vc(t),o.fc(2).onUpdate(e)}))("cancel",(function(){return o.vc(t),o.fc(2).onBrandFormCancel()})),o.Qb(),o.Qb()}if(2&t){const t=o.fc(2);o.zb(1),o.ic("brand",t.brand)}}function F(t,e){if(1&t&&(o.Rb(0,"div",10),o.Dc(1,Q,21,1,"div",11),o.Dc(2,y,2,1,"div",11),o.Qb()),2&t){const t=o.fc();o.zb(1),o.ic("ngIf",!t.showBrandForm),o.zb(1),o.ic("ngIf",t.showBrandForm)}}let S=(()=>{class t{constructor(t,e){this.brandService=t,this.utilService=e,this.brands=[],this.imageUrl="",this.message="",this.errorMessage="",this.loading=!1,this.showBrandForm=!1,this.imageUrl=this.brandService.brandLink+"/image/"}ngOnInit(){this.getAllBrand()}getAllBrand(){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this.brands=yield this.brandService.getAll().toPromise(),this.brands.sort(this.utilService.dynamicSortObject("priority"))}catch(t){this.errorMessage=t}this.loading=!1}))}onShowBrandForm(){this.showBrandForm=!0}onBrandFormCancel(){this.onClose()}onEdit(t){const e=this.brands.find(e=>e._id==t);this.brand=Object.assign({},e),this.showBrandForm=!0}onCreate(t){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0,this.errorMessage="",this.message="";try{const e=yield this.brandService.create(t).toPromise();this.message="Category created",this.brands.push(e),this.showBrandForm=!1}catch(e){this.errorMessage=e}this.loading=!1}))}onUpdate(t){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0,this.errorMessage="",this.message="";const e=this.brand._id;try{yield this.brandService.update(e,t).toPromise(),this.message="Brand updated",this.brand=null,this.showBrandForm=!1,this.getAllBrand()}catch(i){this.errorMessage=i}this.loading=!1}))}onDelete(t){return Object(r.a)(this,void 0,void 0,(function*(){if(confirm("Are you sure to delete"))try{yield this.brandService.delete(t).toPromise(),this.message="Brand deleted",this.brands.splice(this.brands.findIndex(e=>e._id==t),1)}catch(e){this.errorMessage=e}}))}onClose(){this.brand=null,this.showBrandForm=!1,this.loading=!1,this.message="",this.errorMessage=""}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(c.a),o.Mb(n.a))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-brands"]],decls:8,vars:4,consts:[[1,"container-fluid","component-head"],[1,"container"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"],[1,"row"],["class","col-12",4,"ngIf"],[1,"col-12"],[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"p-3","border","border-top-0"],[1,"my-2","my-lg-0"],["type","search","placeholder","Search Brands","aria-label","Search",1,"form-control","mr-sm-2"],[1,"table","table-striped","table-bordered","table-responsive-sm","mt-2"],[1,"text-center"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"brand-image",3,"src","alt"],[1,"btn","btn-sm","btn-warning","mx-1",3,"click"],[1,"fa","fa-pencil"],[1,"btn","btn-sm","btn-danger","mx-1",3,"click"],[1,"fa","fa-trash-o"],[3,"brand","create","update","cancel"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"h3"),o.Fc(2,"Brands"),o.Qb(),o.Qb(),o.Rb(3,"div",1),o.Dc(4,f,1,0,"loading",2),o.Dc(5,g,7,1,"div",3),o.Dc(6,p,7,1,"div",4),o.Dc(7,F,3,2,"div",5),o.Qb()),2&t&&(o.zb(4),o.ic("ngIf",e.loading),o.zb(1),o.ic("ngIf",e.message.length>0),o.zb(1),o.ic("ngIf",e.errorMessage.length>0),o.zb(1),o.ic("ngIf",!e.loading))},directives:[s.k,b.a,a.b,l.s,l.k,l.l,s.j,m],styles:[".brand[_ngcontent-%COMP%]{padding:2px;margin-bottom:3px;border:1px solid #dcdcdc}.brand-image[_ngcontent-%COMP%]{height:50px}"]}),t})();var C=i("KZX/"),z=i("tyNb"),w=i("/Z3d"),x=i("fPRZ");function I(t,e){}function k(t,e){if(1&t&&o.Dc(0,I,0,0,"ng-template",4),2&t){const t=o.fc().$implicit;o.ic("ngTemplateOutlet",t.textOrTpl)}}function _(t,e){if(1&t&&o.Fc(0),2&t){const t=o.fc().$implicit;o.Gc(t.textOrTpl)}}function P(t,e){if(1&t){const t=o.Sb();o.Rb(0,"ngb-toast",1),o.dc("hide",(function(){o.vc(t);const i=e.$implicit;return o.fc().toastService.remove(i)})),o.Dc(1,k,1,1,"ng-template",2),o.Dc(2,_,1,1,"ng-template",null,3,o.Ec),o.Qb()}if(2&t){const t=e.$implicit,i=o.sc(3),r=o.fc();o.Bb(t.classname),o.ic("autohide",!0)("delay",t.delay||3e3),o.zb(1),o.ic("ngIf",r.isTemplate(t))("ngIfElse",i)}}let M=(()=>{class t{constructor(t){this.toastService=t}isTemplate(t){return t.textOrTpl instanceof o.K}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(x.a))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-toasts"]],hostVars:2,hostBindings:function(t,e){2&t&&o.Eb("ngb-toasts",!0)},decls:1,vars:1,consts:[[3,"class","autohide","delay","hide",4,"ngFor","ngForOf"],[3,"autohide","delay","hide"],[3,"ngIf","ngIfElse"],["text",""],[3,"ngTemplateOutlet"]],template:function(t,e){1&t&&o.Dc(0,P,4,6,"ngb-toast",0),2&t&&o.ic("ngForOf",e.toastService.toasts)},directives:[s.j,a.c,s.k,s.m],styles:[""]}),t})();function D(t,e){if(1&t&&(o.Rb(0,"small",34),o.Rb(1,"div",35),o.Fc(2," Name required "),o.Qb(),o.Rb(3,"div",35),o.Fc(4," Minimum Length should be 3 "),o.Qb(),o.Qb()),2&t){const t=o.fc();o.zb(1),o.ic("hidden",!t.form.controls.name.errors.required),o.zb(2),o.ic("hidden",!t.form.controls.name.errors.minlength)}}function O(t,e){if(1&t&&(o.Rb(0,"small",34),o.Rb(1,"div",35),o.Fc(2," Phone number required "),o.Qb(),o.Rb(3,"div",35),o.Fc(4," Phone number format 01934953023 "),o.Qb(),o.Qb()),2&t){const t=o.fc();o.zb(1),o.ic("hidden",!t.form.controls.address.errors.required),o.zb(2),o.ic("hidden",!t.form.controls.address.errors.pattern)}}function N(t,e){if(1&t&&(o.Rb(0,"small",34),o.Rb(1,"div",35),o.Fc(2," Phone number required "),o.Qb(),o.Rb(3,"div",35),o.Fc(4," Phone number format 01934953023 "),o.Qb(),o.Qb()),2&t){const t=o.fc();o.zb(1),o.ic("hidden",!t.form.controls.owner_number.errors.required),o.zb(2),o.ic("hidden",!t.form.controls.owner_number.errors.pattern)}}function A(t,e){if(1&t&&(o.Rb(0,"small",34),o.Rb(1,"div",35),o.Fc(2," Priority required "),o.Qb(),o.Rb(3,"div",35),o.Fc(4," Minimum value should be 0 "),o.Qb(),o.Qb()),2&t){const t=o.fc();o.zb(1),o.ic("hidden",!t.form.controls.priority.errors.required),o.zb(2),o.ic("hidden",!t.form.controls.priority.errors.min)}}const q=function(t,e,i){return{disabled:t,"btn-warning":e,"btn-success":i}};let G=(()=>{class t{constructor(t){this.fb=t,this.create=new o.n,this.update=new o.n,this.cancel=new o.n,this.exists=!1,this.createForm()}ngOnChanges(t){if(this.shop&&this.shop._id){this.exists=!0;const t=Object.assign({},this.shop);this.form.patchValue(t)}}createForm(){this.form=this.fb.group({name:["",[l.q.required,l.q.minLength(3)]],owner_number:["",[l.q.required,l.q.pattern("^01[3-9][ ]?[0-9]{2}[ ]?[0-9]{3}[ ]?[0-9]{3}$")]],address:["",l.q.required],priority:[0,[l.q.required,l.q.min(0)]],contact_number:"",nid:"",latitude:"",longitude:"",trade_license:"",bank_info:"",description:"",image:[null]})}uploadFile(t){this.form.patchValue({image:t.target.files[0]}),this.form.get("image").updateValueAndValidity()}submit(){this.form.valid&&(this.exists?this.update.emit(this.form.value):this.create.emit(this.form.value),this.exists=!1,this.form.reset())}onCancel(){this.cancel.emit(!0)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(l.c))},t.\u0275cmp=o.Gb({type:t,selectors:[["shop-form"]],inputs:{shop:"shop"},outputs:{create:"create",update:"update",cancel:"cancel"},features:[o.xb],decls:70,vars:12,consts:[[1,"navbar","navbar-light","bg-light","border","border-bottom-0"],[1,"navbar-brand"],[1,"p-3","border",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","name",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["type","name","id","name","formControlName","name","placeholder","Shop name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","address",1,"col-sm-2","col-form-label"],["type","text","id","address","formControlName","address","placeholder","Shop Address",1,"form-control"],["for","owner_number",1,"col-sm-2","col-form-label"],[1,"col-sm-4"],["type","text","id","owner_number","formControlName","owner_number","autocomplete","no","placeholder","Owner Phone number","maxlength","11",1,"form-control"],["for","contact_number",1,"col-sm-2","col-form-label"],["type","text","id","contact_number","formControlName","contact_number","placeholder","Contact number","maxlength","11",1,"form-control"],["for","priority",1,"col-sm-2","col-form-label"],["type","priority","id","priority","formControlName","priority","placeholder","Priority",1,"form-control"],["for","nid",1,"col-sm-2","col-form-label"],["type","text","id","nid","formControlName","nid","placeholder","NID",1,"form-control"],["for","latitude",1,"col-sm-2","col-form-label"],["type","text","id","latitude","formControlName","latitude","placeholder","Latitude",1,"form-control"],["for","longitude",1,"col-sm-2","col-form-label"],["type","text","id","longitude","formControlName","longitude","placeholder","Longitude",1,"form-control"],["for","trade_license",1,"col-sm-2","col-form-label"],["type","text","id","trade_license","formControlName","trade_license","placeholder","Trade license",1,"form-control"],["for","bank_info",1,"col-sm-2","col-form-label"],["type","text","id","bank_info","formControlName","bank_info","placeholder","Bank info",1,"form-control"],["for","description",1,"col-sm-2","col-form-label"],["id","description","formControlName","description","placeholder","Description","rows","3",1,"form-control"],["for","image",1,"col-sm-2","col-form-label"],["type","file","id","image",1,"form-control",3,"change"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"btn","btn-danger","mx-1",3,"click"],[1,"text-danger"],[3,"hidden"]],template:function(t,e){1&t&&(o.Rb(0,"nav",0),o.Rb(1,"a",1),o.Fc(2),o.Qb(),o.Qb(),o.Rb(3,"form",2),o.dc("ngSubmit",(function(){return e.submit()})),o.Rb(4,"div",3),o.Rb(5,"label",4),o.Fc(6,"Name *"),o.Qb(),o.Rb(7,"div",5),o.Nb(8,"input",6),o.Dc(9,D,5,2,"small",7),o.Qb(),o.Qb(),o.Rb(10,"div",3),o.Rb(11,"label",8),o.Fc(12,"Shop Addess *"),o.Qb(),o.Rb(13,"div",5),o.Nb(14,"input",9),o.Dc(15,O,5,2,"small",7),o.Qb(),o.Qb(),o.Rb(16,"div",3),o.Rb(17,"label",10),o.Fc(18,"Owner Number *"),o.Qb(),o.Rb(19,"div",11),o.Nb(20,"input",12),o.Dc(21,N,5,2,"small",7),o.Qb(),o.Rb(22,"label",13),o.Fc(23,"Contact Number"),o.Qb(),o.Rb(24,"div",11),o.Nb(25,"input",14),o.Qb(),o.Qb(),o.Rb(26,"div",3),o.Rb(27,"label",15),o.Fc(28,"Priority *"),o.Qb(),o.Rb(29,"div",11),o.Nb(30,"input",16),o.Dc(31,A,5,2,"small",7),o.Qb(),o.Rb(32,"label",17),o.Fc(33,"NID"),o.Qb(),o.Rb(34,"div",11),o.Nb(35,"input",18),o.Qb(),o.Qb(),o.Rb(36,"div",3),o.Rb(37,"label",19),o.Fc(38,"Latitude"),o.Qb(),o.Rb(39,"div",11),o.Nb(40,"input",20),o.Qb(),o.Rb(41,"label",21),o.Fc(42,"Longitude"),o.Qb(),o.Rb(43,"div",11),o.Nb(44,"input",22),o.Qb(),o.Qb(),o.Rb(45,"div",3),o.Rb(46,"label",23),o.Fc(47,"Trade License"),o.Qb(),o.Rb(48,"div",11),o.Nb(49,"input",24),o.Qb(),o.Rb(50,"label",25),o.Fc(51,"Bank info"),o.Qb(),o.Rb(52,"div",11),o.Nb(53,"input",26),o.Qb(),o.Qb(),o.Rb(54,"div",3),o.Rb(55,"label",27),o.Fc(56,"Description"),o.Qb(),o.Rb(57,"div",5),o.Rb(58,"textarea",28),o.Fc(59,"      "),o.Qb(),o.Qb(),o.Qb(),o.Rb(60,"div",3),o.Rb(61,"label",29),o.Fc(62,"Image *"),o.Qb(),o.Rb(63,"div",11),o.Rb(64,"input",30),o.dc("change",(function(t){return e.uploadFile(t)})),o.Qb(),o.Qb(),o.Qb(),o.Rb(65,"div",31),o.Rb(66,"button",32),o.Fc(67),o.Qb(),o.Rb(68,"button",33),o.dc("click",(function(){return e.onCancel()})),o.Fc(69,"Cancel"),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.zb(2),o.Hc("",e.exists?"Update":"Add"," Shop"),o.zb(1),o.ic("formGroup",e.form),o.zb(6),o.ic("ngIf",e.form.controls.name.errors&&e.form.controls.name.touched),o.zb(6),o.ic("ngIf",e.form.controls.address.errors&&e.form.controls.address.touched),o.zb(6),o.ic("ngIf",e.form.controls.owner_number.errors&&e.form.controls.owner_number.touched),o.zb(10),o.ic("ngIf",e.form.controls.priority.errors&&e.form.controls.priority.touched),o.zb(35),o.ic("ngClass",o.oc(8,q,e.form.invalid,e.exists,!e.exists)),o.zb(1),o.Hc(" ",e.exists?"Update":"Create"," "))},directives:[a.b,l.s,l.k,l.e,l.b,l.j,l.d,s.k,l.g,s.i],styles:[""]}),t})();function j(t,e){1&t&&o.Nb(0,"loading")}function B(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",7),o.Rb(1,"strong"),o.Fc(2,"Success! "),o.Qb(),o.Fc(3),o.Rb(4,"button",8),o.dc("click",(function(){return o.vc(t),o.fc().onClose()})),o.Rb(5,"span",9),o.Fc(6,"\xd7"),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.fc();o.zb(3),o.Hc(" ",t.message," ")}}function U(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",10),o.Rb(1,"strong"),o.Fc(2,"Failed! "),o.Qb(),o.Fc(3),o.Rb(4,"button",8),o.dc("click",(function(){return o.vc(t),o.fc().onClose()})),o.Rb(5,"span",9),o.Fc(6,"\xd7"),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.fc();o.zb(3),o.Hc(" ",t.errorMessage," ")}}function $(t,e){if(1&t){const t=o.Sb();o.Rb(0,"tr"),o.Rb(1,"td"),o.Nb(2,"img",26),o.Qb(),o.Rb(3,"td"),o.Rb(4,"a",27),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(4).onDetails(i._id)})),o.Fc(5),o.Qb(),o.Qb(),o.Rb(6,"td",23),o.Fc(7),o.Qb(),o.Rb(8,"td",23),o.Fc(9),o.Qb(),o.Rb(10,"td",23),o.Fc(11),o.Qb(),o.Rb(12,"td",24),o.Rb(13,"div",28),o.Rb(14,"button",29),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(4).onToggleActive(i._id,i.approved)})),o.Nb(15,"i",30),o.Qb(),o.Rb(16,"button",31),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(4).onEdit(i._id)})),o.Nb(17,"i",32),o.Qb(),o.Rb(18,"button",31),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(4).onDelete(i._id)})),o.Nb(19,"i",33),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit,i=o.fc(4);o.zb(2),o.ic("src",i.imageUrl+t._id,o.yc)("alt",t.name+" image"),o.zb(3),o.Hc(" ",t.name," "),o.zb(2),o.Gc(t.priority),o.zb(2),o.Gc(t.status),o.zb(2),o.Gc(t.approved?"Active":"Inactive"),o.zb(3),o.ic("ngClass",t.approved?"btn-danger":"btn-primary"),o.zb(1),o.ic("ngClass",t.approved?"fa-ban":"fa-check")}}function H(t,e){if(1&t&&(o.Rb(0,"tbody"),o.Dc(1,$,20,8,"tr",25),o.Qb()),2&t){const t=o.fc(3);o.zb(1),o.ic("ngForOf",t.shops)}}function L(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",15),o.Rb(1,"nav",16),o.Rb(2,"a",17),o.Fc(3,"Shop List"),o.Qb(),o.Rb(4,"button",18),o.dc("click",(function(){return o.vc(t),o.fc(2).onShowShopForm()})),o.Fc(5," + ADD SHOP "),o.Qb(),o.Qb(),o.Rb(6,"div",19),o.Rb(7,"form",20),o.Nb(8,"input",21),o.Qb(),o.Rb(9,"table",22),o.Rb(10,"thead"),o.Rb(11,"tr"),o.Rb(12,"th"),o.Fc(13,"Image"),o.Qb(),o.Rb(14,"th"),o.Fc(15,"Name"),o.Qb(),o.Rb(16,"th",23),o.Fc(17,"Priority"),o.Qb(),o.Rb(18,"th",23),o.Fc(19,"Status"),o.Qb(),o.Rb(20,"th",23),o.Fc(21,"Active"),o.Qb(),o.Rb(22,"th",24),o.Fc(23,"Actions"),o.Qb(),o.Qb(),o.Qb(),o.Dc(24,H,2,1,"tbody",3),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.fc(2);o.ic("ngClass",t.shop?"col-md-6":""),o.zb(24),o.ic("ngIf",t.shops.length>0)}}function T(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",34),o.Nb(1,"img",35),o.Rb(2,"h3",23),o.Fc(3),o.Qb(),o.Rb(4,"table",36),o.Rb(5,"tbody"),o.Rb(6,"tr"),o.Rb(7,"td"),o.Fc(8,"Name"),o.Qb(),o.Rb(9,"th"),o.Fc(10),o.Qb(),o.Qb(),o.Rb(11,"tr"),o.Rb(12,"td"),o.Fc(13,"Priority"),o.Qb(),o.Rb(14,"th"),o.Fc(15),o.Qb(),o.Qb(),o.Rb(16,"tr"),o.Rb(17,"td"),o.Fc(18,"Active"),o.Qb(),o.Rb(19,"th"),o.Fc(20),o.Qb(),o.Qb(),o.Rb(21,"tr"),o.Rb(22,"td"),o.Fc(23,"Owner Name"),o.Qb(),o.Rb(24,"th"),o.Fc(25),o.Qb(),o.Qb(),o.Rb(26,"tr"),o.Rb(27,"td"),o.Fc(28,"Owner Phone"),o.Qb(),o.Rb(29,"th"),o.Fc(30),o.Qb(),o.Qb(),o.Rb(31,"tr"),o.Rb(32,"td"),o.Fc(33,"Address"),o.Qb(),o.Rb(34,"th"),o.Fc(35),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(36,"div",37),o.Rb(37,"button",38),o.dc("click",(function(){return o.vc(t),o.fc(2).onClose()})),o.Fc(38,"Close"),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.fc(2);o.zb(1),o.ic("src",t.imageUrl+t.shop._id,o.yc)("alt",t.shop.name+" image"),o.zb(2),o.Gc(t.shop.name),o.zb(7),o.Gc(t.shop.slug),o.zb(5),o.Gc(t.shop.priority),o.zb(5),o.Gc(t.shop.approved?"Active":"Inactive"),o.zb(5),o.Gc(t.shop.owner_name),o.zb(5),o.Gc(t.shop.owner_number),o.zb(5),o.Gc(t.shop.address)}}function V(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",39),o.Rb(1,"shop-form",40),o.dc("create",(function(e){return o.vc(t),o.fc(2).onCreate(e)}))("update",(function(e){return o.vc(t),o.fc(2).onUpdate(e)}))("cancel",(function(){return o.vc(t),o.fc(2).onShopFormCancel()})),o.Qb(),o.Qb()}if(2&t){const t=o.fc(2);o.zb(1),o.ic("shop",t.shop)}}function E(t,e){if(1&t&&(o.Rb(0,"div",11),o.Dc(1,L,25,2,"div",12),o.Dc(2,T,39,9,"div",13),o.Dc(3,V,2,1,"div",14),o.Qb()),2&t){const t=o.fc();o.zb(1),o.ic("ngIf",!t.showShopForm),o.zb(1),o.ic("ngIf",!t.showShopForm&&t.shop),o.zb(1),o.ic("ngIf",t.showShopForm)}}let K=(()=>{class t{constructor(t,e,i){this.shopService=t,this.utilService=e,this.toastService=i,this.shops=[],this.imageUrl="",this.message="",this.errorMessage="",this.loading=!1,this.showShopForm=!1,this.imageUrl=this.shopService.shopLink+"/image/"}ngOnInit(){this.getAllShop()}getAllShop(){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this.shops=yield this.shopService.getAll().toPromise(),this.shops.sort(this.utilService.dynamicSortObject("priority"))}catch(t){this.errorMessage=t}this.loading=!1}))}onShowShopForm(){this.showShopForm=!0}onShopFormCancel(){this.onClose()}onEdit(t){const e=this.shops.find(e=>e._id==t);this.shop=Object.assign({},e),this.showShopForm=!0}onDetails(t){const e=this.shops.find(e=>e._id==t);this.shop=Object.assign({},e),this.showShopForm=!1}onCreate(t){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0,this.errorMessage="",this.message="";try{const e=yield this.shopService.create(t).toPromise();this.message="Shop created",this.shops.push(e),this.showShopForm=!1}catch(e){this.errorMessage=e}this.loading=!1}))}onUpdate(t){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0,this.errorMessage="",this.message="";const e=this.shop._id;try{yield this.shopService.update(e,t).toPromise(),this.message="Shop updated",this.showShopForm=!1,this.shop=null,this.getAllShop()}catch(i){this.errorMessage=i}this.loading=!1}))}onDelete(t){return Object(r.a)(this,void 0,void 0,(function*(){if(confirm("Are you sure to delete"))try{yield this.shopService.delete(t).toPromise(),this.message="Shop deleted",this.shops.splice(this.shops.findIndex(e=>e._id==t),1)}catch(e){this.errorMessage=e}}))}onToggleActive(t,e){return Object(r.a)(this,void 0,void 0,(function*(){if(confirm("Are you sure to "+(e?"Activate":"Deactivate")+" ?"))try{const e=yield this.shopService.toggleApprove(t).toPromise();this.toastService.show(e.name+(e.approved?" Activated":" Dectivated"),{classname:"text-light"+(e.approved?" bg-primary":" bg-danger"),delay:3e3}),this.shops.splice(this.shops.findIndex(e=>e._id==t),1,e)}catch(i){this.errorMessage=i}}))}onClose(){this.shop=null,this.showShopForm=!1,this.loading=!1,this.message="",this.errorMessage=""}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(w.a),o.Mb(n.a),o.Mb(x.a))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-shops"]],decls:9,vars:4,consts:[[1,"container-fluid","component-head"],["aria-live","polite","aria-atomic","true"],[1,"container"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"],[1,"row"],["class","col-12",3,"ngClass",4,"ngIf"],["class","col-md-6 col-12",4,"ngIf"],["class","col-12",4,"ngIf"],[1,"col-12",3,"ngClass"],[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"p-3","border","border-top-0"],[1,"my-2","my-lg-0"],["type","search","placeholder","Search Shops","aria-label","Search",1,"form-control","mr-sm-2"],[1,"table","table-striped","table-bordered","table-responsive-sm","mt-2"],[1,"text-center"],[1,"text-right"],[4,"ngFor","ngForOf"],[1,"shop-image",3,"src","alt"],[1,"text-primary",3,"click"],["role","group","aria-label","Basic example",1,"btn-group","rounded"],["type","button",1,"btn","border",3,"ngClass","click"],[1,"fa",3,"ngClass"],["type","button",1,"btn","btn-light","border",3,"click"],[1,"fa","fa-pencil"],[1,"fa","fa-trash-o"],[1,"col-md-6","col-12"],[1,"img-fluid",2,"max-height","400px","display","block",3,"src","alt"],[1,"table","table-striped","border"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-danger",3,"click"],[1,"col-12"],[3,"shop","create","update","cancel"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"h3"),o.Fc(2,"Shops"),o.Qb(),o.Qb(),o.Nb(3,"app-toasts",1),o.Rb(4,"div",2),o.Dc(5,j,1,0,"loading",3),o.Dc(6,B,7,1,"div",4),o.Dc(7,U,7,1,"div",5),o.Dc(8,E,4,3,"div",6),o.Qb()),2&t&&(o.zb(5),o.ic("ngIf",e.loading),o.zb(1),o.ic("ngIf",e.message.length>0),o.zb(1),o.ic("ngIf",e.errorMessage.length>0),o.zb(1),o.ic("ngIf",!e.loading))},directives:[M,s.k,b.a,s.i,a.b,l.s,l.k,l.l,s.j,G],styles:[".shop[_ngcontent-%COMP%]{padding:2px;margin-bottom:3px;border:1px solid #dcdcdc}.shop-image[_ngcontent-%COMP%]{height:50px}"]}),t})();var J=i("3M1h"),X=i("+bRs"),Z=i("HR6+");function W(t,e){if(1&t){const t=o.Sb();o.Rb(0,"a",7),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(2).onCategory(i._id)})),o.Fc(1),o.Qb()}if(2&t){const t=e.$implicit;o.zb(1),o.Gc(t.name)}}function Y(t,e){if(1&t&&(o.Rb(0,"div",4),o.Rb(1,"li",5),o.Rb(2,"strong"),o.Fc(3,"Please select a Category first"),o.Qb(),o.Qb(),o.Dc(4,W,2,1,"a",6),o.Qb()),2&t){const t=o.fc();o.zb(4),o.ic("ngForOf",t.categories)}}function tt(t,e){if(1&t){const t=o.Sb();o.Rb(0,"a",7),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(2).onSubCategory(i._id)})),o.Fc(1),o.Qb()}if(2&t){const t=e.$implicit;o.zb(1),o.Gc(t.name)}}function et(t,e){if(1&t&&(o.Rb(0,"div",4),o.Rb(1,"li",5),o.Rb(2,"strong"),o.Fc(3,"Please select a SubCategory"),o.Qb(),o.Qb(),o.Dc(4,tt,2,1,"a",6),o.Qb()),2&t){const t=o.fc();o.zb(4),o.ic("ngForOf",t.subCategories)}}function it(t,e){if(1&t){const t=o.Sb();o.Rb(0,"a",7),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(2).onBrand(i._id)})),o.Fc(1),o.Qb()}if(2&t){const t=e.$implicit;o.zb(1),o.Gc(t.name)}}function rt(t,e){if(1&t&&(o.Rb(0,"div",4),o.Rb(1,"li",5),o.Rb(2,"strong"),o.Fc(3,"Please select a Brand"),o.Qb(),o.Qb(),o.Dc(4,it,2,1,"a",6),o.Qb()),2&t){const t=o.fc();o.zb(4),o.ic("ngForOf",t.brands)}}function ot(t,e){if(1&t&&(o.Rb(0,"small",28),o.Rb(1,"div",29),o.Fc(2," Name required "),o.Qb(),o.Rb(3,"div",29),o.Fc(4," Minimum Length should be 3 "),o.Qb(),o.Qb()),2&t){const t=o.fc(2);o.zb(1),o.ic("hidden",!t.form.controls.name.errors.required),o.zb(2),o.ic("hidden",!t.form.controls.name.errors.minlength)}}function ct(t,e){if(1&t&&(o.Rb(0,"small",28),o.Rb(1,"div",29),o.Fc(2," Priority required "),o.Qb(),o.Rb(3,"div",29),o.Fc(4," Minimum value should be 0 "),o.Qb(),o.Qb()),2&t){const t=o.fc(2);o.zb(1),o.ic("hidden",!t.form.controls.priority.errors.required),o.zb(2),o.ic("hidden",!t.form.controls.priority.errors.min)}}function nt(t,e){if(1&t&&(o.Rb(0,"small",28),o.Fc(1),o.Qb()),2&t){const t=o.fc(2);o.zb(1),o.Hc(" ",t.errorMessage," ")}}const st=function(t,e,i){return{disabled:t,"btn-warning":e,"btn-success":i}};function bt(t,e){if(1&t){const t=o.Sb();o.Rb(0,"form",8),o.dc("ngSubmit",(function(){return o.vc(t),o.fc().submit()})),o.Rb(1,"div",9),o.Rb(2,"label",10),o.Fc(3,"Category"),o.Qb(),o.Rb(4,"div",11),o.Rb(5,"label",12),o.Fc(6),o.Qb(),o.Qb(),o.Qb(),o.Rb(7,"div",9),o.Rb(8,"label",13),o.Fc(9,"Brand"),o.Qb(),o.Rb(10,"div",11),o.Rb(11,"label",14),o.Fc(12),o.Qb(),o.Qb(),o.Qb(),o.Rb(13,"div",9),o.Rb(14,"label",15),o.Fc(15,"Name"),o.Qb(),o.Rb(16,"div",11),o.Nb(17,"input",16),o.Dc(18,ot,5,2,"small",17),o.Qb(),o.Qb(),o.Rb(19,"div",9),o.Rb(20,"label",18),o.Fc(21,"Priority"),o.Qb(),o.Rb(22,"div",11),o.Nb(23,"input",19),o.Dc(24,ct,5,2,"small",17),o.Qb(),o.Qb(),o.Rb(25,"div",9),o.Rb(26,"label",20),o.Fc(27,"Thumb"),o.Qb(),o.Rb(28,"div",11),o.Rb(29,"input",21),o.dc("change",(function(e){return o.vc(t),o.fc().uploadThumb(e)})),o.Qb(),o.Qb(),o.Qb(),o.Rb(30,"div",9),o.Rb(31,"label",22),o.Fc(32,"Image"),o.Qb(),o.Rb(33,"div",11),o.Rb(34,"input",23),o.dc("change",(function(e){return o.vc(t),o.fc().uploadFile(e)})),o.Qb(),o.Qb(),o.Dc(35,nt,2,1,"small",17),o.Qb(),o.Rb(36,"div",24),o.Rb(37,"button",25),o.dc("click",(function(){return o.vc(t),o.fc().onClose()})),o.Fc(38,"Close"),o.Qb(),o.Rb(39,"button",26),o.dc("click",(function(){return o.vc(t),o.fc().onClear()})),o.Fc(40,"Clear"),o.Qb(),o.Rb(41,"button",27),o.Fc(42),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.fc();o.ic("formGroup",t.form),o.zb(6),o.Gc(t.category.name),o.zb(6),o.Gc(t.brand.name),o.zb(6),o.ic("ngIf",t.form.controls.name.errors&&t.form.controls.name.touched),o.zb(6),o.ic("ngIf",t.form.controls.priority.errors&&t.form.controls.priority.touched),o.zb(11),o.ic("ngIf",t.errorMessage.length>0),o.zb(6),o.ic("ngClass",o.oc(8,st,t.form.invalid,t.exists,!t.exists)),o.zb(1),o.Hc(" ",t.exists?"Update":"Create"," ")}}let at=(()=>{class t{constructor(t){this.fb=t,this.create=new o.n,this.update=new o.n,this.close=new o.n,this.exists=!1,this.files=[],this.errorMessage="",this.createForm()}ngOnChanges(t){if(this.product&&this.product._id){this.exists=!0,this.category=this.categories.find(t=>t._id===this.product.category._id),this.brand=this.brands.find(t=>t._id===this.product.brand._id);const t=Object.assign({categoryId:this.product.category._id,brandId:this.product.brand._id},this.product);this.form.patchValue(t)}}createForm(){this.form=this.fb.group({name:["",[l.q.required,l.q.minLength(3)]],categoryId:["",l.q.required],subCategoryId:["",l.q.required],brandId:["",l.q.required],priority:[0,[l.q.required,l.q.min(0)]],images:[null],thumb:[null]})}uploadFile(t){t.target.files.length>0&&t.target.files.length<5?this.form.patchValue({images:t.target.files}):t.target.files.length>4&&(this.errorMessage="Product image limit is 4")}uploadThumb(t){this.form.patchValue({thumb:t.target.files[0]}),this.form.get("thumb").updateValueAndValidity()}onCategory(t){this.category=this.categories.find(e=>e._id===t),this.form.controls.categoryId.setValue(t)}onSubCategory(t){this.subCategory=this.subCategories.find(e=>e._id===t),this.form.controls.subCategoryId.setValue(t)}onBrand(t){this.brand=this.brands.find(e=>e._id===t),this.form.controls.brandId.setValue(t)}onClear(){this.category=null,this.brand=null,this.form.reset()}submit(){this.form.valid&&(this.exists?this.update.emit(this.form.value):this.create.emit(this.form.value),this.exists=!1,this.form.reset())}onClose(){this.close.emit()}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(l.c))},t.\u0275cmp=o.Gb({type:t,selectors:[["product-form"]],inputs:{product:"product",categories:"categories",subCategories:"subCategories",brands:"brands"},outputs:{create:"create",update:"update",close:"close"},features:[o.xb],decls:7,vars:5,consts:[[1,"navbar","navbar-light","bg-light","border","border-bottom-0"],[1,"navbar-brand"],["class","list-group",4,"ngIf"],["class","p-3 border",3,"formGroup","ngSubmit",4,"ngIf"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-action list-group-item-light py-1 text-dark",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","list-group-item-light","py-1","text-dark",3,"click"],[1,"p-3","border",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","category",1,"col-sm-2","col-form-label"],[1,"col-sm-10"],["id","category",1,"form-control"],["for","brand",1,"col-sm-2","col-form-label"],["id","brand",1,"form-control"],["for","name",1,"col-sm-2","col-form-label"],["type","name","id","name","formControlName","name","placeholder","Product name",1,"form-control"],["class","text-danger",4,"ngIf"],["for","priority",1,"col-sm-2","col-form-label"],["type","number","id","priority","formControlName","priority","placeholder","Priority",1,"form-control"],["for","thumb",1,"col-sm-2","col-form-label"],["type","file","id","thumb",1,"form-control",3,"change"],["for","image",1,"col-sm-2","col-form-label"],["type","file","id","image","multiple","",1,"form-control",3,"change"],[1,"d-flex","justify-content-end"],[1,"btn","btn-danger","btn-sm","mx-1",3,"click"],[1,"btn","btn-warning","btn-sm","mx-1",3,"click"],["type","submit",1,"btn","btn-primary","mx-1",3,"ngClass"],[1,"text-danger"],[3,"hidden"]],template:function(t,e){1&t&&(o.Rb(0,"nav",0),o.Rb(1,"a",1),o.Fc(2),o.Qb(),o.Qb(),o.Dc(3,Y,5,1,"div",2),o.Dc(4,et,5,1,"div",2),o.Dc(5,rt,5,1,"div",2),o.Dc(6,bt,43,12,"form",3)),2&t&&(o.zb(2),o.Hc("",e.exists?"Update":"Add"," Product"),o.zb(1),o.ic("ngIf",!e.category&&!e.subCategory&&!e.brand),o.zb(1),o.ic("ngIf",e.category&&!e.subCategory&&!e.brand),o.zb(1),o.ic("ngIf",e.category&&e.subCategory&&!e.brand),o.zb(1),o.ic("ngIf",e.category&&e.brand))},directives:[a.b,s.k,s.j,l.s,l.k,l.e,l.b,l.j,l.d,l.o,s.i],styles:[""]}),t})();function lt(t,e){1&t&&o.Nb(0,"loading")}function dt(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",7),o.Rb(1,"strong"),o.Fc(2,"Success! "),o.Qb(),o.Fc(3),o.Rb(4,"button",8),o.dc("click",(function(){return o.vc(t),o.fc().onClose()})),o.Rb(5,"span",9),o.Fc(6,"\xd7"),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.fc();o.zb(3),o.Hc(" ",t.message," ")}}function ut(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",10),o.Rb(1,"strong"),o.Fc(2,"Failed! "),o.Qb(),o.Fc(3),o.Rb(4,"button",8),o.dc("click",(function(){return o.vc(t),o.fc().onClose()})),o.Rb(5,"span",9),o.Fc(6,"\xd7"),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.fc();o.zb(3),o.Hc(" ",t.errorMessage," ")}}function ht(t,e){if(1&t){const t=o.Sb();o.Rb(0,"tr"),o.Rb(1,"td"),o.Nb(2,"img",24),o.Qb(),o.Rb(3,"td"),o.Rb(4,"a",25),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(3).onDetails(i._id)})),o.Fc(5),o.Qb(),o.Qb(),o.Rb(6,"td",20),o.Fc(7),o.Qb(),o.Rb(8,"td",20),o.Fc(9),o.Qb(),o.Rb(10,"td",21),o.Rb(11,"button",26),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(3).onToggleActive(i._id,i.active)})),o.Nb(12,"i",27),o.Qb(),o.Rb(13,"button",28),o.dc("click",(function(){o.vc(t);const i=e.$implicit;return o.fc(3).onEdit(i._id)})),o.Nb(14,"i",29),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit,i=o.fc(3);o.zb(2),o.ic("src",i.thumbUrl+t._id,o.yc)("alt",t.name+" image"),o.zb(3),o.Hc(" ",t.name," "),o.zb(2),o.Gc(t.priority),o.zb(2),o.Gc(t.active?"Active":"Inactive"),o.zb(2),o.ic("ngClass",t.active?"btn-danger":"btn-primary"),o.zb(1),o.ic("ngClass",t.active?"fa-ban":"fa-check")}}function mt(t,e){if(1&t&&(o.Rb(0,"tbody"),o.Dc(1,ht,15,7,"tr",23),o.Qb()),2&t){const t=o.fc(2);o.zb(1),o.ic("ngForOf",t.products)}}function ft(t,e){if(1&t&&(o.Rb(0,"div",36),o.Nb(1,"img",37),o.Qb()),2&t){const t=e.index,i=o.fc(3);o.zb(1),o.ic("src",i.imageUrl+i.product._id+"/"+t,o.yc)("alt",i.product.name+" image")}}function gt(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",30),o.Rb(1,"div",31),o.Dc(2,ft,2,2,"div",32),o.Qb(),o.Rb(3,"h3",20),o.Fc(4),o.Qb(),o.Rb(5,"table",33),o.Rb(6,"tbody"),o.Rb(7,"tr"),o.Rb(8,"td"),o.Fc(9),o.Qb(),o.Rb(10,"th"),o.Fc(11),o.Qb(),o.Qb(),o.Rb(12,"tr"),o.Rb(13,"td"),o.Fc(14,"Priority"),o.Qb(),o.Rb(15,"th"),o.Fc(16),o.Qb(),o.Qb(),o.Rb(17,"tr"),o.Rb(18,"td"),o.Fc(19,"Active"),o.Qb(),o.Rb(20,"th"),o.Fc(21),o.Qb(),o.Qb(),o.Rb(22,"tr"),o.Rb(23,"td"),o.Fc(24,"Max price"),o.Qb(),o.Rb(25,"th"),o.Fc(26),o.Qb(),o.Qb(),o.Rb(27,"tr"),o.Rb(28,"td"),o.Fc(29,"Min price"),o.Qb(),o.Rb(30,"th"),o.Fc(31),o.Qb(),o.Qb(),o.Rb(32,"tr"),o.Rb(33,"td"),o.Fc(34,"Category"),o.Qb(),o.Rb(35,"th"),o.Fc(36),o.Qb(),o.Qb(),o.Rb(37,"tr"),o.Rb(38,"td"),o.Fc(39,"SubCategory"),o.Qb(),o.Rb(40,"th"),o.Fc(41),o.Qb(),o.Qb(),o.Rb(42,"tr"),o.Rb(43,"td"),o.Fc(44,"Brand"),o.Qb(),o.Rb(45,"th"),o.Fc(46),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(47,"div",34),o.Rb(48,"button",35),o.dc("click",(function(){return o.vc(t),o.fc(2).onClose()})),o.Fc(49,"Close"),o.Qb(),o.Qb(),o.Qb()}if(2&t){const t=o.fc(2);o.zb(2),o.ic("ngForOf",t.counter(t.product.image_count)),o.zb(2),o.Gc(t.product.name),o.zb(5),o.Hc("Name ",t.product.image_count,""),o.zb(2),o.Gc(t.product.slug),o.zb(5),o.Gc(t.product.priority),o.zb(5),o.Gc(t.product.active?"Active":"Inactive"),o.zb(5),o.Gc(t.product.max_price),o.zb(5),o.Gc(t.product.min_price),o.zb(5),o.Gc(null==t.product.category?null:t.product.category.name),o.zb(5),o.Gc(null==t.product||null==t.product.sub_category?null:t.product.sub_category.name),o.zb(5),o.Gc(null==t.product.brand?null:t.product.brand.name)}}function pt(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",30),o.Rb(1,"product-form",38),o.dc("create",(function(e){return o.vc(t),o.fc(2).onCreate(e)}))("update",(function(e){return o.vc(t),o.fc(2).onUpdate(e)}))("close",(function(){return o.vc(t),o.fc(2).onClose()})),o.Qb(),o.Qb()}if(2&t){const t=o.fc(2);o.zb(1),o.ic("categories",t.categories)("subCategories",t.subCategories)("brands",t.brands)("product",t.product)}}function vt(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",11),o.Rb(1,"div",12),o.Rb(2,"nav",13),o.Rb(3,"a",14),o.Fc(4,"Product List"),o.Qb(),o.Rb(5,"button",15),o.dc("click",(function(){return o.vc(t),o.fc().onShowProductForm()})),o.Fc(6," + ADD PRODUCT "),o.Qb(),o.Qb(),o.Rb(7,"div",16),o.Rb(8,"form",17),o.Nb(9,"input",18),o.Qb(),o.Rb(10,"table",19),o.Rb(11,"thead"),o.Rb(12,"tr"),o.Rb(13,"th"),o.Fc(14,"Image"),o.Qb(),o.Rb(15,"th"),o.Fc(16,"Name"),o.Qb(),o.Rb(17,"th",20),o.Fc(18,"Priority"),o.Qb(),o.Rb(19,"th",20),o.Fc(20,"Active"),o.Qb(),o.Rb(21,"th",21),o.Fc(22,"Actions"),o.Qb(),o.Qb(),o.Qb(),o.Dc(23,mt,2,1,"tbody",3),o.Qb(),o.Qb(),o.Qb(),o.Dc(24,gt,50,11,"div",22),o.Dc(25,pt,2,4,"div",22),o.Qb()}if(2&t){const t=o.fc();o.zb(1),o.ic("ngClass",t.product||t.showProductForm?"col-md-6":""),o.zb(22),o.ic("ngIf",t.products.length>0),o.zb(1),o.ic("ngIf",!t.showProductForm&&t.product),o.zb(1),o.ic("ngIf",t.showProductForm)}}const Rt=[{path:"shops",component:K},{path:"brands",component:S},{path:"",component:(()=>{class t{constructor(t,e,i,r,o,c){this.categoryService=t,this.subCategoryService=e,this.brandService=i,this.productService=r,this.utilService=o,this.toastService=c,this.products=[],this.categories=[],this.subCategories=[],this.brands=[],this.imageUrl="",this.thumbUrl="",this.message="",this.errorMessage="",this.loading=!1,this.showProductForm=!1,this.imageUrl=this.productService.productLink+"/image/",this.thumbUrl=this.productService.productLink+"/thumb/"}ngOnInit(){this.getAllProducts(),this.getAllCategory(),this.getAllSubCategory(),this.getAllBrand()}getAllProducts(){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this.products=yield this.productService.getAll().toPromise(),this.products.sort(this.utilService.dynamicSortObject("priority"))}catch(t){this.errorMessage=t}this.loading=!1}))}getAllCategory(){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this.categories=yield this.categoryService.getAll().toPromise()}catch(t){this.errorMessage=t}this.loading=!1}))}getAllSubCategory(){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this.subCategories=yield this.subCategoryService.getAll().toPromise()}catch(t){this.errorMessage=t}this.loading=!1}))}getAllBrand(){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0;try{this.brands=yield this.brandService.getAll().toPromise()}catch(t){this.errorMessage=t}this.loading=!1}))}onShowProductForm(){this.showProductForm=!0}onEdit(t){const e=this.products.find(e=>e._id==t);this.product=Object.assign({},e),this.showProductForm=!0}onDetails(t){const e=this.products.find(e=>e._id==t);this.product=Object.assign({},e),this.showProductForm=!1}onCreate(t){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0,this.errorMessage="",this.message="";try{const e=yield this.productService.create(t).toPromise();this.message="Product created",this.products.push(e),this.showProductForm=!1}catch(e){this.errorMessage=e}this.loading=!1}))}onUpdate(t){return Object(r.a)(this,void 0,void 0,(function*(){this.loading=!0,this.errorMessage="",this.message="";const e=this.product._id;try{yield this.productService.update(e,t).toPromise(),this.message="Product updated",this.showProductForm=!1,this.product=null,this.getAllProducts()}catch(i){this.errorMessage=i}this.loading=!1}))}onToggleActive(t,e){return Object(r.a)(this,void 0,void 0,(function*(){if(confirm("Are you sure to "+(e?"Dectivate":"Activate")+" ?"))try{const e=yield this.productService.toggleActive(t).toPromise();this.toastService.show(e.name+(e.active?" Activated":" Dectivated"),{classname:"text-light"+(e.approved?" bg-primary":" bg-danger"),delay:3e3}),this.products.splice(this.products.findIndex(e=>e._id==t),1,e)}catch(i){this.errorMessage=i}}))}onClose(){this.product=null,this.showProductForm=!1,this.loading=!1,this.message="",this.errorMessage=""}counter(t){return new Array(t)}}return t.\u0275fac=function(e){return new(e||t)(o.Mb(J.a),o.Mb(X.a),o.Mb(c.a),o.Mb(Z.a),o.Mb(n.a),o.Mb(x.a))},t.\u0275cmp=o.Gb({type:t,selectors:[["app-products"]],decls:9,vars:4,consts:[[1,"container-fluid","component-head"],["aria-live","polite","aria-atomic","true"],[1,"container"],[4,"ngIf"],["class","alert alert-success alert-dismissible show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible show","role","alert",4,"ngIf"],["class","row",4,"ngIf"],["role","alert",1,"alert","alert-success","alert-dismissible","show"],["type","button",1,"close",3,"click"],["aria-hidden","true"],["role","alert",1,"alert","alert-danger","alert-dismissible","show"],[1,"row"],[1,"col-12","pr-0",3,"ngClass"],[1,"navbar","navbar-light","bg-light","border"],[1,"navbar-brand"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],[1,"p-3","border","border-top-0"],[1,"my-2","my-lg-0"],["type","search","placeholder","Search Products","aria-label","Search",1,"form-control","mr-sm-2"],[1,"table","table-striped","table-bordered","table-responsive-sm","mt-2"],[1,"text-center"],[1,"text-right"],["class","col-md-6 col-12",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"product-image",3,"src","alt"],[1,"text-primary",3,"click"],[1,"btn","btn-sm",3,"ngClass","click"],[1,"fa",3,"ngClass"],[1,"btn","btn-sm","btn-warning","mx-1",3,"click"],[1,"fa","fa-pencil"],[1,"col-md-6","col-12"],[1,"row","m-0"],["class","column",4,"ngFor","ngForOf"],[1,"table","table-striped","border"],[1,"d-flex","flex-row-reverse"],[1,"btn","btn-danger",3,"click"],[1,"column"],[1,"img-fluid","border",3,"src","alt"],[3,"categories","subCategories","brands","product","create","update","close"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"h3"),o.Fc(2,"Products"),o.Qb(),o.Qb(),o.Nb(3,"app-toasts",1),o.Rb(4,"div",2),o.Dc(5,lt,1,0,"loading",3),o.Dc(6,dt,7,1,"div",4),o.Dc(7,ut,7,1,"div",5),o.Dc(8,vt,26,4,"div",6),o.Qb()),2&t&&(o.zb(5),o.ic("ngIf",e.loading),o.zb(1),o.ic("ngIf",e.message.length>0),o.zb(1),o.ic("ngIf",e.errorMessage.length>0),o.zb(1),o.ic("ngIf",!e.loading))},directives:[M,s.k,b.a,s.i,a.b,l.s,l.k,l.l,s.j,at],styles:[".product[_ngcontent-%COMP%]{padding:2px;margin-bottom:3px;border:1px solid #dcdcdc}.product-image[_ngcontent-%COMP%]{height:50px}.column[_ngcontent-%COMP%]{float:left;width:50%;padding:5px}.column[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;max-height:200px}"]}),t})()}];let Qt=(()=>{class t{}return t.\u0275mod=o.Kb({type:t}),t.\u0275inj=o.Jb({factory:function(e){return new(e||t)},imports:[[C.a,z.e.forChild(Rt)]]}),t})()}}]);