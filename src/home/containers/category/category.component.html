<!--  -->
<div class="container">
    <div class="banner-shop">
        <div class="banner-shop-thumb" *ngIf="categoryNav">
            <a href="#"><img [src]="categoryNav?.image_urls[0]" alt=""></a>
        </div>
        <div class="banner-shop-info text-center">
            <h2>{{categoryNav?.name}}</h2>
            <!-- <p>Apple, Samsung, LG</p> -->
        </div>
    </div>

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb bg-dark text-white">
            <li class="breadcrumb-item"><a routerLink="/">Home</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{categoryNav?.name}}</li>
        </ol>
    </nav>

    {{cart | json}}
    <button type="button" class="btn btn-primary" (click)="openModal(editProfileModal)">Open Modal</button>

    <ng-template #editProfileModal let-modal>
        <detail-modal [product]="product"></detail-modal>
        <div class="modal-header">
            <h5 class="modal-title" id="editProfileLabel">Edit Profile</h5>
            <button type="button" class="close" (click)="modal.dismiss()" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>

        <div class="modal-body">
            <form>
                <div class="form-group row">
                    <label for="firstname" class="col-sm-4 col-form-label">First Name</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="firstname">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="lastname" class="col-sm-4 col-form-label">Last Name</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="lastname">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="username" class="col-sm-4 col-form-label">Username</label>
                    <div class="col-sm-8">
                        <input type="text" class="form-control" id="username">
                    </div>
                </div>
                <div class="form-group row">
                    <label for="email" class="col-sm-4 col-form-label">Email</label>
                    <div class="col-sm-8">
                        <input type="email" class="form-control" id="email">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" (click)="modal.dismiss()">Close</button>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
            </form>
        </div>
    </ng-template>

    <div class="row">

        <div class="col-md-3 col-12">
            <side-nav-collapse [data]="categoryNav" [sub_category]="sub_category" [title]="categoryNav?.name"
                (resp)="onSideNavClick($event)">
            </side-nav-collapse>

            <price-filter (resp)="onPriceFilter($event)"></price-filter>

            <best-sellers></best-sellers>

            <brands></brands>
        </div>

        <div class="col-md-9 col-12">
            <div class="products py-2 mb-3">
                <!-- Show sub-categories -->
                <div *ngIf="!productPage && categoryNav && (!sub_category || sub_category?.sub_sub_category.length == 0)"
                    class="row m-0">
                    <div class="col-auto pr-0" *ngFor="let sub_cat of categoryNav?.sub_category">
                        <category-component [data]="sub_cat" (select)="onSelectSubCategory($event)">
                        </category-component>
                    </div>
                </div>

                <div *ngIf="!productPage && sub_category?.sub_sub_category.length> 0" class="row m-0">
                    <div class="col-auto pr-0" *ngFor="let sub_cat of sub_category?.sub_sub_category">
                        <category-component [data]="sub_cat" (select)="onSelectSubSubCategory($event)">
                        </category-component>
                    </div>
                </div>


                <!-- <div class="products-bar clearfix" *ngIf="productPage?.docs?.length">
                    <pagination [page]="productPage" (paginate)="onChangePage($event)"></pagination>
                </div> -->

                <loading *ngIf="loading"></loading>
                <div class="row clearfix m-0" *ngIf="!loading && productPage">
                    <div class="col-12 text-center" *ngIf="productPage.docs.length == 0">
                        <i class="fa fa-frown-o"></i> Sorry no product found
                    </div>
                    <div class="col-md-3 col-6" *ngFor="let product of productPage?.docs">
                        <product1 [product]="product" [imageUrl]="prodImageUrl" [thumbUrl]="prodThumbUrl"
                            (cart)="onAddToCart($event)" (shortDetails)="onShortDetails($event)"></product1>
                    </div>
                    <div class="col-12" *ngIf="productPage?.docs?.length">
                        <pagination [page]="productPage" (paginate)="onChangePage($event)"></pagination>
                    </div>
                </div>
                <!-- <div class="pagi-bar bottom">
                    <a class="current-page" href="#">1</a>
                    <a href="#">2</a>
                    <a class="next-page" href="#"><i aria-hidden="true" class="fa fa-caret-right"></i></a>
                </div> -->
            </div>
        </div>
    </div>
</div>